
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.2">
    
    
      
        <title>Python - Cheat Sheets</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.50c56a3b.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="deep-purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#python" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Cheat Sheets" class="md-header__button md-logo" aria-label="Cheat Sheets" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cheat Sheets
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Python
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="deep-purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="deep-purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/pavaud/cheatsheets" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pavaud/cheatsheets
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../installation/" class="md-tabs__link">
          
  
  Python

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../sql/basics/" class="md-tabs__link">
          
  
  SQL

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Cheat Sheets" class="md-nav__button md-logo" aria-label="Cheat Sheets" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Cheat Sheets
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/pavaud/cheatsheets" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pavaud/cheatsheets
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Python
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Python
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../best_practices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Best Practices
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../environment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Environment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../executable/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create an Executable
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../project/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Project Structure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    SQL
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            SQL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sql/basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basics
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-an-executable" class="md-nav__link">
    <span class="md-ellipsis">
      Create an Executable
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Project Structure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-packages" class="md-nav__link">
    <span class="md-ellipsis">
      Create Packages
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python-basics" class="md-nav__link">
    <span class="md-ellipsis">
      Python Basics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Python Basics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#operators" class="md-nav__link">
    <span class="md-ellipsis">
      Operators
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assignation" class="md-nav__link">
    <span class="md-ellipsis">
      Assignation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comparison" class="md-nav__link">
    <span class="md-ellipsis">
      Comparison
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logical-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      Logical Comparison
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#membership" class="md-nav__link">
    <span class="md-ellipsis">
      Membership
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-names-scope" class="md-nav__link">
    <span class="md-ellipsis">
      Variable Names Scope
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#control-structures" class="md-nav__link">
    <span class="md-ellipsis">
      Control Structures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#loops" class="md-nav__link">
    <span class="md-ellipsis">
      Loops
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#types" class="md-nav__link">
    <span class="md-ellipsis">
      Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#string" class="md-nav__link">
    <span class="md-ellipsis">
      String
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#format-string" class="md-nav__link">
    <span class="md-ellipsis">
      Format-String
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regex" class="md-nav__link">
    <span class="md-ellipsis">
      Regex
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lists" class="md-nav__link">
    <span class="md-ellipsis">
      Lists []
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tuples" class="md-nav__link">
    <span class="md-ellipsis">
      Tuples ()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dictionaries-key-value" class="md-nav__link">
    <span class="md-ellipsis">
      Dictionaries {key: value}
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sets" class="md-nav__link">
    <span class="md-ellipsis">
      Sets {}
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#counter" class="md-nav__link">
    <span class="md-ellipsis">
      Counter
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annotations" class="md-nav__link">
    <span class="md-ellipsis">
      Annotations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#display-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      Display documentation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#definition" class="md-nav__link">
    <span class="md-ellipsis">
      Definition
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modules-packages-and-librairies" class="md-nav__link">
    <span class="md-ellipsis">
      Modules, Packages and Librairies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#with-statement" class="md-nav__link">
    <span class="md-ellipsis">
      With Statement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#try-except-statement" class="md-nav__link">
    <span class="md-ellipsis">
      Try Except Statement
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#poo" class="md-nav__link">
    <span class="md-ellipsis">
      POO
    </span>
  </a>
  
    <nav class="md-nav" aria-label="POO">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#concepts" class="md-nav__link">
    <span class="md-ellipsis">
      Concepts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#class-definition" class="md-nav__link">
    <span class="md-ellipsis">
      Class Definition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#heritage" class="md-nav__link">
    <span class="md-ellipsis">
      Heritage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#polymorphism" class="md-nav__link">
    <span class="md-ellipsis">
      Polymorphism
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#built-in-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Built in Functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decorators" class="md-nav__link">
    <span class="md-ellipsis">
      Decorators
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#threading" class="md-nav__link">
    <span class="md-ellipsis">
      Threading
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiprocessing" class="md-nav__link">
    <span class="md-ellipsis">
      Multiprocessing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coroutines" class="md-nav__link">
    <span class="md-ellipsis">
      Coroutines
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="python">Python</h1>
<h2 id="create-an-executable">Create an Executable</h2>
<p><strong>Install with python 2</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>python-dev
pip<span class="w"> </span>install<span class="w"> </span>cx_Freeze
</code></pre></div></td></tr></table></div></p>
<p><strong>Install with python 3</strong></p>
<ul>
<li>Download <code>cx_Freeze</code> library et extract</li>
<li>in <code>setup.py</code>, replace the following line:</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">if</span> <span class="ow">not</span> <span class="nb">vars</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Py_ENABLE_SHARED&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
</code></pre></div></td></tr></table></div>
<p>with:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">if</span> <span class="kc">True</span><span class="p">:</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>Compile
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>setup.py<span class="w"> </span>build
setup.py<span class="w"> </span>install
</code></pre></div></td></tr></table></div></li>
</ul>
<p><strong>Program</strong></p>
<p>The name must be <code>setup.py</code></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">cx_Freeze</span> <span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">Executable</span>

<span class="c1"># Call the setup function</span>
<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;program_name&quot;</span><span class="p">,</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Program description&quot;</span><span class="p">,</span>
    <span class="n">executables</span> <span class="o">=</span> <span class="p">[</span><span class="n">Executable</span><span class="p">(</span><span class="s2">&quot;script_name.py&quot;</span><span class="p">)],</span>
<span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p><strong>Build</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>python<span class="w"> </span>setup.py<span class="w"> </span>build
</code></pre></div></td></tr></table></div>
<h2 id="project-structure">Project Structure</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code># from Hitchhiker&#39;s

README.rst
LICENSE
setup.py
requirements.txt
sample/__init__.py
sample/core.py
sample/helpers.py
docs/conf.py
docs/index.rst
tests/test_basic.py
tests/test_advanced.py


# From Pytest doc

src/
    mypkg/
        __init__.py
        app.py
        view.py
tests/
    test_app.py
    test_view.py
    ...


# Avoid using __init__.py in test folder

new_project
├── antigravity
│   ├── __init__.py         # make it a package
│   └── antigravity.py
└── test
    ├── __init__.py         # also make test a package
    └── test_antigravity.py

# deal with relative path 
import os
FILE = os.path.realpath(os.path.join(os.path.dirname(__file__), &#39;..&#39;,&#39;data&#39;, &#39;api_keys.txt&#39;))
</code></pre></div></td></tr></table></div>
<p><strong>Main Structure</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="ch">#!/usr/bin/env python3</span>
<span class="c1"># -*- coding: utf-8 -*- </span>
<span class="c1">#----------------------------------------------------------------------------</span>
<span class="c1"># Created By  : name_of_the_creator</span>
<span class="c1"># Created Date: date/month/time ..etc</span>
<span class="c1"># version =&#39;1.0&#39;</span>
<span class="c1"># ---------------------------------------------------------------------------</span>
<span class="sd">&quot;&quot;&quot; Extraction of all relevant fields in the Datatourisme DB</span>

<span class="sd">The script extracts the programmated stream from the Datatourisme website and </span>
<span class="sd">checks for all updated POIs before transforming it and loading it into the </span>
<span class="sd">Agoraa MySQL DB. </span>

<span class="sd">Usage: </span>
<span class="sd">    $ python datatourisme.py</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;Philippe Vaudin&quot;</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s2">&quot;Copyright 2007, The Cogent Project&quot;</span>
<span class="n">__credits__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Rob Knight&quot;</span><span class="p">,</span> <span class="s2">&quot;Peter Maxwell&quot;</span><span class="p">]</span>
<span class="n">__license__</span> <span class="o">=</span> <span class="s2">&quot;GPL&quot;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;1.0.1&quot;</span>
<span class="n">__date__</span> <span class="o">=</span> <span class="mi">14</span><span class="o">/</span><span class="mi">03</span><span class="o">/</span><span class="mi">2023</span>
<span class="n">__maintainer__</span> <span class="o">=</span> <span class="s2">&quot;Philippe Vaudin&quot;</span>
<span class="n">__email__</span> <span class="o">=</span> <span class="s2">&quot;philippe@agoraa.fr&quot;</span>
<span class="n">__status__</span> <span class="o">=</span> <span class="s2">&quot;Production&quot;</span>   <span class="c1"># ou &#39;Development&#39; ou &#39;Prototype&#39;</span>


<span class="kn">import</span> <span class="nn">os</span>           <span class="c1"># standard library</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="kn">import</span> <span class="nn">requests</span>     <span class="c1"># 3rd party packages</span>

<span class="kn">import</span> <span class="nn">mypackage</span>    <span class="c1"># local source</span>


<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This is my file to demonstrate best practices.&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">process_data</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Beginning data processing...&quot;</span><span class="p">)</span>
    <span class="n">modified_data</span> <span class="o">=</span> <span class="n">data</span> <span class="o">+</span> <span class="s2">&quot; that has been modified&quot;</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Data processing finished.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">modified_data</span>


<span class="k">def</span> <span class="nf">read_data_from_web</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Reading data from the Web&quot;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;Data from the web&quot;</span>
    <span class="k">return</span> <span class="n">data</span>


<span class="k">def</span> <span class="nf">write_data_to_database</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Writing data to a database&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">read_data_from_web</span><span class="p">()</span>
    <span class="n">modified_data</span> <span class="o">=</span> <span class="n">process_data</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">write_data_to_database</span><span class="p">(</span><span class="n">modified_data</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<h2 id="create-packages">Create Packages</h2>
<p>All directory with an <code>__init__.py</code> file is considered as a package.</p>
<p>Structure of a python package (in the same directory as the said program):
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>- nom_programme.py
- nom_package/
    - __init__.py
    - nom_module1.py
    - nom_module2.py
    -...
</code></pre></div></td></tr></table></div></p>
<h2 id="python-basics">Python Basics</h2>
<h3 id="operators">Operators</h3>
<table>
<thead>
<tr>
<th style="text-align: center;">Symbole</th>
<th>Opération</th>
<th>Exemple</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">+</td>
<td>Addition</td>
<td>6+4 returns 10</td>
</tr>
<tr>
<td style="text-align: center;">-</td>
<td>Substraction</td>
<td>6-4 returns 2</td>
</tr>
<tr>
<td style="text-align: center;">*</td>
<td>Multiplication</td>
<td>6*4 returns 24</td>
</tr>
<tr>
<td style="text-align: center;">/</td>
<td>Division</td>
<td>6/4 returns 1.5</td>
</tr>
<tr>
<td style="text-align: center;">//</td>
<td>Integer division</td>
<td>6.0//4 returns 1</td>
</tr>
<tr>
<td style="text-align: center;">**</td>
<td>Power</td>
<td>6**4 returns 1296</td>
</tr>
<tr>
<td style="text-align: center;">%</td>
<td>Modulo</td>
<td>6 % 4 returns 2</td>
</tr>
</tbody>
</table>
<h3 id="assignation">Assignation</h3>
<table>
<thead>
<tr>
<th style="text-align: center;">Symbole</th>
<th>Opération</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">+=</td>
<td>Addition</td>
</tr>
<tr>
<td style="text-align: center;">-=</td>
<td>Substraction</td>
</tr>
<tr>
<td style="text-align: center;">*=</td>
<td>Multiplication</td>
</tr>
<tr>
<td style="text-align: center;">/=</td>
<td>Division</td>
</tr>
<tr>
<td style="text-align: center;">//=</td>
<td>Integer division</td>
</tr>
<tr>
<td style="text-align: center;">**=</td>
<td>Power</td>
</tr>
<tr>
<td style="text-align: center;">%=</td>
<td>Modulo</td>
</tr>
</tbody>
</table>
<h3 id="comparison">Comparison</h3>
<table>
<thead>
<tr>
<th style="text-align: center;">Expression</th>
<th style="text-align: center;">Exemple</th>
<th>Signification</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">&lt;</td>
<td style="text-align: center;">x &lt; y</td>
<td>Est-ce que x est strictement inférieur à y ?</td>
</tr>
<tr>
<td style="text-align: center;">&lt;=</td>
<td style="text-align: center;">x &lt;= y</td>
<td>Est-ce que x inférieur ou égal à y ?</td>
</tr>
<tr>
<td style="text-align: center;">&gt;</td>
<td style="text-align: center;">x &gt; y</td>
<td>Est-ce que x est strictement supérieur à y ?</td>
</tr>
<tr>
<td style="text-align: center;">&gt;=</td>
<td style="text-align: center;">x &gt;= y</td>
<td>Est-ce que x est supérieur ou égal à y ?</td>
</tr>
<tr>
<td style="text-align: center;">==</td>
<td style="text-align: center;">x == y</td>
<td>Est-ce que x est égal à y ?</td>
</tr>
<tr>
<td style="text-align: center;">!=</td>
<td style="text-align: center;">x != y</td>
<td>Est-ce que x est différent de y ?</td>
</tr>
</tbody>
</table>
<h3 id="logical-comparison">Logical Comparison</h3>
<table>
<thead>
<tr>
<th style="text-align: center;">Opérateur</th>
<th>Exemple</th>
<th>Signification</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">and</td>
<td>P and Q</td>
<td>Est-ce que P et Q sont toutes deux vraie ?</td>
</tr>
<tr>
<td style="text-align: center;">or</td>
<td>P or Q</td>
<td>Est-ce que au moins une des expressions parmi P et Q est vraie ?</td>
</tr>
<tr>
<td style="text-align: center;">not</td>
<td>not P</td>
<td>La négation de l'expression P</td>
</tr>
</tbody>
</table>
<h3 id="membership">Membership</h3>
<table>
<thead>
<tr>
<th style="text-align: center;">Expression</th>
<th>Exemple</th>
<th>Signification</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">in</td>
<td>"France" in extrait</td>
<td>return true if France is in extrait</td>
</tr>
<tr>
<td style="text-align: center;">not in</td>
<td>"France" not in extrait</td>
<td>return true if France is not in extrait</td>
</tr>
</tbody>
</table>
<h3 id="variable-names-scope">Variable Names Scope</h3>
<ul>
<li>
<p><code>variable_name</code> : normal variable</p>
</li>
<li>
<p><code>_single_leading_underscore</code> : weak <strong>module internal use</strong> indicator.</p>
<blockquote>
<p>E.g. : <code>from M import *</code> <strong>does not import</strong> objects whose name starts with an underscore.</p>
</blockquote>
</li>
<li>
<p><code>single_trailing_underscore_</code>: used by convention to avoid conflicts with Python keyword.</p>
<blockquote>
<p>E.g.: Tkinter.Toplevel(master, class_='ClassName')</p>
</blockquote>
</li>
<li>
<p><code>__double_leading_underscore</code>: when naming a class attribute, invokes <code>name mangling</code>
 (inside class FooBar, __boo becomes _FooBar__boo; see below).</p>
</li>
<li>
<p><code>__double_leading_and_trailing_underscore__</code>: “magic” objects or attributes that live in user-controlled namespaces. </p>
<blockquote>
<p>E.g. <code>__init__</code>, <code>__import__</code> or <code>__file__</code>. Never invent such names; only use them as documented.</p>
</blockquote>
</li>
</ul>
<h3 id="control-structures">Control Structures</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># normal control</span>
<span class="k">if</span> <span class="n">condition</span><span class="p">:</span>
    <span class="n">statment</span>
<span class="k">elif</span> <span class="n">condition</span><span class="p">:</span>
    <span class="n">statment</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">statment</span>

<span class="c1"># conditionnal assignment </span>
<span class="n">redouble</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">moyenne</span> <span class="o">&lt;</span> <span class="mi">10</span> <span class="k">else</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
<h3 id="loops">Loops</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">while</span> <span class="n">condition</span><span class="p">:</span>
    <span class="n">statment</span>

<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">sequence</span><span class="p">:</span>                           <span class="c1"># sequence can be range, list/dict/tuple</span>
    <span class="n">statment</span>

<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">step</span><span class="p">):</span>            <span class="c1"># sequence can be a range</span>
    <span class="n">statment</span>                                    <span class="c1"># &#39;end&#39; is exclusive, step not necessary (1 by default)</span>
                                                <span class="c1"># range(n) -&gt; goes from 0 to n-1</span>

<span class="n">ma_liste</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>            <span class="c1"># list comprehension (can be used for generator with &quot;()&quot; instead of &quot;[]&quot;)</span>
<span class="n">liste_pairs</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;pair&quot;</span> <span class="k">if</span> <span class="n">n</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;impair&quot;</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">liste_nombres</span><span class="p">]</span>

<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">element</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sequence</span><span class="p">):</span>      <span class="c1"># enumerate returns item and index of item</span>

<span class="k">for</span> <span class="n">item1</span><span class="p">,</span> <span class="n">item2</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">seq1</span><span class="p">,</span> <span class="n">seq2</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>        <span class="c1"># zip iterates on multiple sequences at a time</span>
</code></pre></div></td></tr></table></div>
<h3 id="types">Types</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">type</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>                                       <span class="c1"># type of variable var</span>
<span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>                                           <span class="c1"># This is the address of the object in memory </span>
</code></pre></div></td></tr></table></div>
<h4 id="string">String</h4>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">sep</span><span class="p">,</span><span class="n">maxsplit</span><span class="p">)</span>                           <span class="c1"># sep default is space ans maxsplit is the number of splits to do. default is -1 which splits all the items.</span>
<span class="s1">&#39;-&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">la</span><span class="p">,</span><span class="n">bas</span><span class="p">])</span>                              <span class="c1"># returns &quot;la-bas&quot;</span>
<span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>                                       <span class="c1"># remove all right and left spaces from s</span>
<span class="n">s</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;()&quot;</span><span class="p">)</span>                                   <span class="c1"># remove all ( and ) from s on right and left</span>
<span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">swapcase</span><span class="p">()</span>
<span class="n">s</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>                                    <span class="c1"># count number of &#39;c&#39; character in s</span>
<span class="nb">sorted</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>                         <span class="c1"># permet de trier les caractères de s</span>
</code></pre></div></td></tr></table></div>
<h4 id="format-string">Format-String</h4>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">DEBUG</span><span class="w"> </span><span class="si">= }</span><span class="s2">&quot;</span><span class="p">)</span>                <span class="c1"># print DEBUG = False </span>

<span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">nombre</span><span class="w"> </span><span class="si">:</span><span class="s1"> &gt;+20_.4f</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">nombre2</span><span class="w"> </span><span class="si">:</span><span class="s1"> &gt;+20_.4f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="mf">3.1415926</span>       <span class="p">{:</span><span class="mf">.2</span><span class="n">f</span><span class="p">}</span>  <span class="mf">3.14</span>        <span class="n">Format</span> <span class="nb">float</span> <span class="mi">2</span> <span class="n">decimal</span> <span class="n">places</span>
<span class="mf">3.1415926</span>       <span class="p">{:</span><span class="o">+</span><span class="mf">.2</span><span class="n">f</span><span class="p">}</span> <span class="o">+</span><span class="mf">3.14</span>       <span class="n">Format</span> <span class="nb">float</span> <span class="mi">2</span> <span class="n">decimal</span> <span class="n">places</span> <span class="k">with</span> <span class="n">sign</span>
<span class="o">-</span><span class="mi">1</span>              <span class="p">{:</span><span class="o">+</span><span class="mf">.2</span><span class="n">f</span><span class="p">}</span> <span class="o">-</span><span class="mf">1.00</span>       <span class="n">Format</span> <span class="nb">float</span> <span class="mi">2</span> <span class="n">decimal</span> <span class="n">places</span> <span class="k">with</span> <span class="n">sign</span>
<span class="mf">2.71828</span>         <span class="p">{:</span><span class="mf">.0</span><span class="n">f</span><span class="p">}</span>  <span class="mi">3</span>           <span class="n">Format</span> <span class="nb">float</span> <span class="k">with</span> <span class="n">no</span> <span class="n">decimal</span> <span class="n">places</span>
<span class="mi">4</span>               <span class="p">{:</span><span class="mi">0</span><span class="o">&gt;</span><span class="mi">2</span><span class="n">d</span><span class="p">}</span> <span class="mi">04</span>          <span class="n">Pad</span> <span class="n">number</span> <span class="k">with</span> <span class="n">zeros</span> <span class="p">(</span><span class="n">left</span> <span class="n">padding</span><span class="p">,</span> <span class="n">width</span> <span class="mi">2</span><span class="p">)</span>
<span class="mi">4</span>               <span class="p">{:</span><span class="n">x</span><span class="o">&lt;</span><span class="mi">4</span><span class="n">d</span><span class="p">}</span> <span class="mi">4</span><span class="n">xxx</span>        <span class="n">Pad</span> <span class="n">number</span> <span class="k">with</span> <span class="n">x</span><span class="err">’</span><span class="n">s</span> <span class="p">(</span><span class="n">right</span> <span class="n">padding</span><span class="p">,</span> <span class="n">width</span> <span class="mi">4</span><span class="p">)</span>
<span class="mi">10</span>              <span class="p">{:</span><span class="n">x</span><span class="o">&lt;</span><span class="mi">4</span><span class="n">d</span><span class="p">}</span> <span class="mi">10</span><span class="n">xx</span>        <span class="n">Pad</span> <span class="n">number</span> <span class="k">with</span> <span class="n">x</span><span class="err">’</span><span class="n">s</span> <span class="p">(</span><span class="n">right</span> <span class="n">padding</span><span class="p">,</span> <span class="n">width</span> <span class="mi">4</span><span class="p">)</span>
<span class="mi">1000000</span>         <span class="p">{:,}</span>    <span class="mi">1</span><span class="p">,</span><span class="mi">000</span><span class="p">,</span><span class="mi">000</span>   <span class="n">Number</span> <span class="nb">format</span> <span class="k">with</span> <span class="n">comma</span> <span class="n">separator</span>
<span class="mf">0.35</span>            <span class="p">{:</span><span class="mf">.2</span><span class="o">%</span><span class="p">}</span>  <span class="mf">35.00</span><span class="o">%</span>      <span class="n">Format</span> <span class="n">percentage</span>
<span class="mi">1000000000</span>      <span class="p">{:</span><span class="mf">.2</span><span class="n">e</span><span class="p">}</span>  <span class="mf">1.00e+09</span>    <span class="n">Exponent</span> <span class="n">notation</span>
<span class="mi">11</span>              <span class="p">{:</span><span class="mi">11</span><span class="n">d</span><span class="p">}</span>  <span class="mi">11</span>          <span class="n">Right</span><span class="o">-</span><span class="n">aligned</span> <span class="p">(</span><span class="n">default</span><span class="p">,</span> <span class="n">width</span> <span class="mi">10</span><span class="p">)</span>
<span class="mi">11</span>              <span class="p">{:</span><span class="o">&lt;</span><span class="mi">11</span><span class="n">d</span><span class="p">}</span> <span class="mi">11</span>          <span class="n">Left</span><span class="o">-</span><span class="n">aligned</span> <span class="p">(</span><span class="n">width</span> <span class="mi">10</span><span class="p">)</span>
<span class="mi">11</span>              <span class="p">{:</span><span class="o">^</span><span class="mi">11</span><span class="n">d</span><span class="p">}</span> <span class="mi">11</span>          <span class="n">Center</span> <span class="n">aligned</span> <span class="p">(</span><span class="n">width</span> <span class="mi">10</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p><code>[[fill]align][sign][#][0][minimumwidth][.precision][type]</code></p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code># align and fill
&#39;&lt;&#39; - left-aligned within the available space (This is the default.)
&#39;&gt;&#39; - right-aligned within the available space.
&#39;^&#39; - centered within the available space.
&#39;=&#39; - (for numeric types) Forces the padding to be placed after the sign (if any)
      but before the digits.  This is used for printing fields
      in the form &#39;+000000120&#39;.
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code># sign option just for numeric types
&#39;+&#39;  - sign should be used for both positive and negative numbers
&#39;-&#39;  - sign should be used only for negative numbers (default)
&#39; &#39;  - leading space should be used on positive numbers
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code>&#39;b&#39; - Binary. Outputs the number in base 2.
&#39;c&#39; - Character. Converts the integer to the corresponding Unicode character before printing.
&#39;d&#39; - Decimal Integer. Outputs the number in base 10.
&#39;o&#39; - Octal format. Outputs the number in base 8.
&#39;x&#39; - Hex format. Outputs the number in base 16, using lower-case letters for the digits above 9.
&#39;X&#39; - Hex format. Outputs the number in base 16, using upper-case letters for the digits above 9.
&#39;n&#39; - Number. This is the same as &#39;d&#39;, with current locale setting to insert the appropriate number separator characters.
&#39;&#39; (None) - the same as &#39;d&#39;
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code>&#39;e&#39; - Exponent notation.
&#39;E&#39; - Exponent notation. Same as &#39;e&#39; except it converts the number to uppercase.
&#39;f&#39; - Fixed point. Displays the number as a fixed-point number.
&#39;F&#39; - Fixed point. Same as &#39;f&#39; except it converts the number to uppercase.
&#39;g&#39; - General format. fixed-point number, unless the number is too large, in which case it switches to &#39;e&#39;
&#39;G&#39; - General format. Same as &#39;g&#39; except switches to &#39;E&#39; if the number gets to large.
&#39;n&#39; - Number. This is the same as &#39;g&#39;, with current locale setting to insert the appropriate number separator characters.
&#39;%&#39; - Percentage. Multiplies the number by 100 and displays in fixed (&#39;f&#39;) format, followed by a percent sign.
&#39;&#39; (None) - similar to &#39;g&#39;, except that it prints at least one digit after the decimal point.
</code></pre></div></td></tr></table></div></p>
<h4 id="regex">Regex</h4>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">re</span>
</code></pre></div></td></tr></table></div>
<h4 id="lists">Lists []</h4>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># processing</span>
<span class="n">my_list</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>                                  <span class="c1"># remove item at index 1</span>
<span class="n">my_list</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>                           <span class="c1"># remove first occurence of value</span>
<span class="n">my_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>                               <span class="c1"># append x to the end of the list</span>
<span class="n">my_list</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>                             <span class="c1"># insert x at the index 1 in the list</span>
<span class="n">my_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">my_other_list</span><span class="p">)</span>                   <span class="c1"># extend ma_liste with my_other_list</span>
<span class="n">my_list</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>                                  <span class="c1"># sort list (reversed=True for reverse order)</span>
<span class="nb">sorted</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>                                 <span class="c1"># même effet que pour sort() mais s&#39;utilise aussi sur les string</span>
<span class="n">my_list</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>                               <span class="c1"># (In-place) reverse all element of my_list</span>
<span class="n">my_list</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>                                 <span class="c1"># remove all item from list</span>
<span class="n">my_list</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>                            <span class="c1"># return first index of value</span>
<span class="n">my_list</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>                                  <span class="c1"># copy of my_list</span>

<span class="c1"># slicing</span>
<span class="n">my_list</span><span class="p">[</span><span class="n">start</span><span class="p">:</span><span class="n">end</span><span class="p">:</span><span class="n">step</span><span class="p">]</span>                         <span class="c1"># end is exclusive, step not necessary (1 by default) </span>
<span class="n">my_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>                                      <span class="c1"># first element</span>
<span class="n">my_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>                                     <span class="c1"># last element</span>
<span class="n">my_list</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>                                 <span class="c1"># </span>
<span class="n">my_list</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>                                   <span class="c1"># reverted order</span>
<span class="n">my_list</span><span class="p">[</span><span class="o">...</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>                                  <span class="c1"># [:, :, :, 0], […, 0] and [Ellipsis, 0] are equivalent</span>
</code></pre></div></td></tr></table></div>
<h4 id="tuples">Tuples ()</h4>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">un_tuple</span> <span class="o">=</span> <span class="s2">&quot;Bonjour&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">133</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">un_tuple</span>                              <span class="c1"># Tuple assignment (number of variable = number of item in tuple)</span>
<span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span>                                     <span class="c1"># value swapping instead of tmp variable</span>
</code></pre></div></td></tr></table></div>
<h4 id="dictionaries-key-value">Dictionaries {key: value}</h4>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">my_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;age&quot;</span><span class="p">:</span><span class="mi">25</span><span class="p">,</span><span class="s2">&quot;taille&quot;</span><span class="p">:</span><span class="mi">183</span><span class="p">,</span><span class="s2">&quot;sexe&quot;</span><span class="p">:</span><span class="s2">&quot;F&quot;</span><span class="p">}</span>
<span class="n">my_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)}</span>
<span class="nb">dict</span><span class="p">([(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="mi">200</span><span class="p">)])</span>

<span class="n">my_dict</span><span class="p">[</span><span class="s2">&quot;new_key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;value&quot;</span>                    <span class="c1"># add new key with value</span>
<span class="n">my_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;new_key&quot;</span><span class="p">)</span>                          <span class="c1"># remove new_key.</span>
<span class="n">my_dict</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>                                 <span class="c1"># Removes all the elements from the dictionary</span>
<span class="n">my_dict</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>                                  <span class="c1"># Returns a copy of the dictionary</span>
<span class="n">my_dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">()</span>                              <span class="c1"># Returns a dictionary with the specified keys and value</span>
<span class="n">my_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">)</span>                              <span class="c1"># Returns the value of the specified &#39;key&#39;</span>
<span class="n">my_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>                                 <span class="c1"># Returns a list containing a tuple for each key value pair</span>
<span class="n">my_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>                                  <span class="c1"># Returns a list containing the dictionary&#39;s keys</span>
<span class="n">my_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>                                <span class="c1"># Returns a list of all the values in the dictionary</span>
<span class="n">my_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>                                   <span class="c1"># Removes the last element if no key specified</span>
<span class="n">my_dict</span><span class="o">.</span><span class="n">popitem</span><span class="p">()</span>                               <span class="c1"># Removes the last inserted key-value pair</span>
<span class="n">my_dict</span><span class="o">.</span><span class="n">setdefault</span><span class="p">()</span>                            <span class="c1"># Returns the value of the specified key. If the key does not exist: insert the key, with the specified value</span>
<span class="n">my_dict</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>                                <span class="c1"># Updates the dictionary with the specified key-value pairs</span>
<span class="k">del</span> <span class="n">my_dict</span><span class="p">[</span><span class="s2">&quot;xxx&quot;</span><span class="p">]</span>                              <span class="c1"># remove key &quot;xxx&quot; from dict</span>
</code></pre></div></td></tr></table></div>
<p><em>shallow vs. deep copy</em></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">copy</span>

<span class="n">original_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;key1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;key2&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}}</span>
<span class="n">shallow_copy</span> <span class="o">=</span> <span class="n">original_dict</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">deep_copy</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">original_dict</span><span class="p">)</span>
<span class="n">assign_copy</span> <span class="o">=</span> <span class="n">original_dict</span>

<span class="c1"># Modifying the inner list</span>
<span class="n">original_dict</span><span class="p">[</span><span class="s1">&#39;key1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Id : </span><span class="si">{</span><span class="nb">id</span><span class="p">(</span><span class="n">original_dict</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">original_dict</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>         <span class="c1"># Id : 1846091003776, {&#39;key1&#39;: [1, 2, 3, 4], &#39;key2&#39;: {&#39;a&#39;: 1, &#39;b&#39;: 2}}</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Id : </span><span class="si">{</span><span class="nb">id</span><span class="p">(</span><span class="n">shallow_copy</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">shallow_copy</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>           <span class="c1"># Id : 1846090999232, {&#39;key1&#39;: [1, 2, 3, 4], &#39;key2&#39;: {&#39;a&#39;: 1, &#39;b&#39;: 2}}</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Id : </span><span class="si">{</span><span class="nb">id</span><span class="p">(</span><span class="n">deep_copy</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">deep_copy</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>                 <span class="c1"># Id : 1846090994432, {&#39;key1&#39;: [1, 2, 3], &#39;key2&#39;: {&#39;a&#39;: 1, &#39;b&#39;: 2}}</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Id : </span><span class="si">{</span><span class="nb">id</span><span class="p">(</span><span class="n">assign_copy</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">assign_copy</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>             <span class="c1"># Id : 1846091003776, {&#39;key1&#39;: [1, 2, 3, 4], &#39;key2&#39;: {&#39;a&#39;: 1, &#39;b&#39;: 2}}</span>
</code></pre></div></td></tr></table></div>
<h4 id="sets">Sets {}</h4>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Set creation</span>
<span class="p">{</span><span class="s1">&#39;jack&#39;</span><span class="p">,</span> <span class="s1">&#39;sjoerd&#39;</span><span class="p">}</span>
<span class="p">{</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="s1">&#39;abracadabra&#39;</span> <span class="k">if</span> <span class="n">c</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;abc&#39;</span><span class="p">}</span>
<span class="nb">set</span><span class="p">()</span>
<span class="nb">set</span><span class="p">(</span><span class="s1">&#39;foobar&#39;</span><span class="p">)</span>
<span class="nb">set</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">])</span>

<span class="c1"># Functions</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="s1">&#39;abracadabra&#39;</span><span class="p">)</span>                          <span class="c1"># return unique letters of &#39;abracadabra&#39;</span>
<span class="n">y</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="s1">&#39;chti&#39;</span><span class="p">)</span>                                 

<span class="n">x</span><span class="o">.</span><span class="n">isdisjoint</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>                                 <span class="c1"># returns true if x and y have no common element</span>

<span class="n">x</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>                                   <span class="c1"># returns true if all elements of x are in y</span>
<span class="n">x</span> <span class="o">&lt;=</span> <span class="n">y</span>                                          

<span class="n">x</span><span class="o">.</span><span class="n">issuperset</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>                                 <span class="c1"># returns true if all elements of y are in x</span>
<span class="n">x</span> <span class="o">&gt;=</span> <span class="n">y</span>                                          

<span class="n">x</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>                                      <span class="c1"># returns new set with all elements from both x and y</span>
<span class="n">x</span> <span class="o">|</span> <span class="n">y</span>                                           

<span class="n">x</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>                               <span class="c1"># returns a new set with elements common to x and y</span>
<span class="n">x</span> <span class="o">&amp;</span> <span class="n">y</span>                                           

<span class="n">x</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>                                 <span class="c1"># returns a new set with elements in x that are not in y</span>
<span class="n">x</span> <span class="o">-</span> <span class="n">y</span>                                           
</code></pre></div></td></tr></table></div>
<h4 id="counter">Counter</h4>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>

<span class="c1"># récupération de toutes les observations</span>
<span class="n">data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
    <span class="p">{</span><span class="s1">&#39;key1&#39;</span><span class="p">:</span><span class="n">value1</span><span class="p">,</span><span class="s1">&#39;key2&#39;</span><span class="p">:</span><span class="n">value2</span><span class="p">},</span> 
    <span class="p">{</span><span class="s1">&#39;key1&#39;</span><span class="p">:</span><span class="n">value1</span><span class="p">,</span><span class="s1">&#39;key2&#39;</span><span class="p">:</span><span class="n">value2</span><span class="p">,</span> <span class="s1">&#39;key3&#39;</span><span class="p">:</span><span class="n">value3</span><span class="p">}</span>
<span class="p">)</span>

<span class="c1"># comptage du nombre de champs par document</span>
<span class="n">fields_count</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">data</span><span class="p">))</span>                <span class="c1"># compte les clés de premier niveau seulement</span>

<span class="c1"># calcul de la distribution du nombre de champs par document</span>
<span class="n">counter</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">fields_count</span><span class="p">)</span>
<span class="c1"># Counter({20: 675, 19: 380, 21: 174, 18: 107, 17: 4})</span>
<span class="c1"># Il y a 675 objets de 20 champs etc...</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">d</span><span class="o">=-</span><span class="mi">2</span><span class="p">)</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="c1"># Counter({&#39;a&#39;: 3, &#39;b&#39;: 0, &#39;c&#39;: -3, &#39;d&#39;: -6})</span>

<span class="n">counter</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>                          <span class="c1"># Returns a list of tuples of the n most frequent keys with their value</span>
<span class="c1"># [(&#39;20&#39;, 675), (&#39;19&#39;, 380), (&#39;21&#39;, 174))]</span>
<span class="n">c</span><span class="o">.</span><span class="n">most_common</span><span class="p">()[:</span><span class="o">-</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>                       <span class="c1"># n least common elements</span>

<span class="n">counter</span><span class="o">.</span><span class="n">total</span><span class="p">()</span>
<span class="c1"># N : sum of all value in the counter</span>

<span class="o">+</span><span class="n">counter</span>                                        <span class="c1"># remove zero and negative counts</span>
</code></pre></div></td></tr></table></div>
<h3 id="annotations">Annotations</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">une_fonction</span><span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="nb">str</span><span class="o">=</span><span class="s1">&#39;Hello World&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="kc">None</span><span class="p">:</span>    <span class="c1"># parameter and return type precised</span>
   <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">une_fonction</span><span class="o">.</span><span class="vm">__annotations__</span><span class="p">)</span>             <span class="c1"># display annotations of a function</span>
<span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="s1">&#39;return&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="functions">Functions</h3>
<h4 id="display-documentation">Display documentation</h4>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">help</span><span class="p">(</span><span class="n">my_function</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h4 id="definition">Definition</h4>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">param1</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">param2</span><span class="p">,</span> <span class="o">...</span><span class="p">):</span>         <span class="c1"># parameters can be any type, x is the default value of param1</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;short description of the function in one line.</span>

<span class="sd">    Parameters:</span>
<span class="sd">        param1 : la liste à trier.</span>
<span class="sd">        param2 : number of items</span>

<span class="sd">    Return :</span>
<span class="sd">        val_out : return value   </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># statments</span>
    <span class="o">...</span>

    <span class="c1"># result</span>
    <span class="k">return</span> <span class="n">val1</span><span class="p">,</span> <span class="n">val2</span>                           <span class="c1"># when multiple return -&gt; tuple assignment</span>
</code></pre></div></td></tr></table></div>
<h3 id="modules-packages-and-librairies">Modules, Packages and Librairies</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>                              <span class="c1"># &quot;as np&quot; not necessary, np is an alias</span>
<span class="nb">print</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>                             <span class="c1"># if &quot;as np&quot; is not mentionned</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>                                <span class="c1"># if &quot;as np&quot; is mentionned</span>

<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">cos</span><span class="p">,</span> <span class="n">sin</span><span class="p">,</span> <span class="n">exp</span>                 <span class="c1"># import only the modules cos, sin, exp</span>
</code></pre></div></td></tr></table></div>
<h3 id="with-statement">With Statement</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;file_path&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>            <span class="c1"># ensure that the process ends properly</span>
    <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;hello world !&#39;</span><span class="p">)</span>                 <span class="c1"># and is equivalent to the try except approach</span>

<span class="c1"># try except equivalent</span>
<span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;file_path&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;hello world !&#39;</span><span class="p">)</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>    
</code></pre></div></td></tr></table></div>
<h3 id="try-except-statement">Try Except Statement</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Please enter a number: &quot;</span><span class="p">))</span>
        <span class="k">break</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Oops!  That was no valid number.  Try again...&quot;</span><span class="p">)</span>  
</code></pre></div></td></tr></table></div>
<h2 id="poo">POO</h2>
<h3 id="concepts">Concepts</h3>
<p><strong>Generics</strong></p>
<ul>
<li>classe</li>
<li>constructor</li>
<li>getter and setter</li>
<li>encapsulation (_ and __ are protected prefix or private but all is public in reality)</li>
<li>héritage (multiple)</li>
<li>surcharge de méthode</li>
<li>polymorphisme</li>
<li>interface</li>
<li>collections d'objet</li>
<li>erreur</li>
</ul>
<p><strong>Python</strong></p>
<ul>
<li>attribut de classe/instance</li>
<li>decorateurs</li>
<li>methode de classe/instance/statique (@classmethod)</li>
<li>propiété (@property) (getter et setter)</li>
</ul>
<p><strong>Best Practices</strong></p>
<ul>
<li>TDD</li>
<li>Design Patterns</li>
<li>SOLID</li>
<li>Single responsibility</li>
<li>Chaque classe ou fonction doit faire une seule chose</li>
<li>Open/Closed</li>
<li>Les classes doivent être ouvertes à l’extension, mais fermées à la modification.</li>
<li>Liskov</li>
<li>Les sous-classes doivent pouvoir faire tout ce que font leurs classes parentes</li>
<li>Interface Segregation</li>
<li>responsabilité unique, appliqué aux interfaces.</li>
<li>Dependency Inversion</li>
<li>Les classes parentes ne doivent pas avoir à changer lorsque l’une de leurs sous-classes est modifiée.</li>
</ul>
<p><strong>Avoid</strong></p>
<ul>
<li>STUPID</li>
<li>Singleton.</li>
<li>Couplage fort (« Tight coupling »).</li>
<li>Non-testabilité (« Untestability »).</li>
<li>Optimisation prématurée (« Premature optimization »).</li>
<li>Nommage non descriptif (« Indescriptive naming »).</li>
<li>Duplication.</li>
</ul>
<h3 id="class-definition">Class Definition</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Car</span><span class="p">:</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;La classe Car permet de construire une voiture.</span>

<span class="sd">    Paramètres</span>
<span class="sd">    ----------</span>
<span class="sd">    color : Chaîne de caractères : Couleur de la voiture.</span>
<span class="sd">    model : Chaîne de caractères : Modèle de la voiture.</span>
<span class="sd">    horsepower : Entier : Cylindrée de la voiture.</span>

<span class="sd">    Example</span>
<span class="sd">    -------</span>
<span class="sd">    aventador = Car(color = &quot;orange&quot;, model = &quot;Aventador&quot;, horsepower = 700)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Definition of class variable</span>
    <span class="n">n_cars</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># Définition du constructeur de la classe Car</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">horsepower</span><span class="p">):</span>
       <span class="c1"># Initialisation des attributs de la classe avec les arguments du constructeur</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">horsepower</span> <span class="o">=</span> <span class="n">horsepower</span>

    <span class="c1"># Définition d&#39;une méthode permettant de changer la couleur d&#39;une voiture</span>
    <span class="k">def</span> <span class="nf">change_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_color</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Modifie la couleur d&#39;une voiture.</span>

<span class="sd">        Paramètres</span>
<span class="sd">        ----------</span>
<span class="sd">        new_color : string : Nouvelle couleur de la voiture.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">new_color</span>

<span class="c1"># instanciation</span>
<span class="n">aventador</span> <span class="o">=</span> <span class="n">Car</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="s2">&quot;orange&quot;</span><span class="p">,</span>               <span class="c1"># Création d&#39;un objet de la classe Car</span>
                <span class="n">model</span> <span class="o">=</span> <span class="s2">&quot;Aventador&quot;</span><span class="p">,</span>
                <span class="n">horsepower</span> <span class="o">=</span> <span class="mi">700</span><span class="p">)</span>

<span class="c1"># display class documentation</span>
<span class="n">help</span><span class="p">(</span><span class="n">Car</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="heritage">Heritage</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Vehicule</span><span class="p">:</span> 
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seats</span> <span class="o">=</span> <span class="n">a</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">passengers</span> <span class="o">=</span> <span class="n">b</span> 

    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">passengers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Moto</span><span class="p">(</span><span class="n">Vehicule</span><span class="p">):</span> <span class="c1"># heritate from Vehicule</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seats</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">passengers</span> <span class="o">=</span> <span class="n">b</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">brand</span> <span class="o">=</span> <span class="n">c</span>
</code></pre></div></td></tr></table></div>
<h3 id="polymorphism">Polymorphism</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Vehicule</span><span class="p">:</span> 
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seats</span> <span class="o">=</span> <span class="n">a</span>  
        <span class="bp">self</span><span class="o">.</span><span class="n">passengers</span> <span class="o">=</span> <span class="n">b</span>

    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">passengers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Moto</span><span class="p">(</span><span class="n">Vehicule</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seats</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">passengers</span> <span class="o">=</span> <span class="n">b</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">brand</span> <span class="o">=</span> <span class="n">c</span>

    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span> <span class="c1"># polymorphism</span>
        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">passengers</span><span class="p">)</span> <span class="o">&lt;</span>  <span class="bp">self</span><span class="o">.</span><span class="n">seats</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">passengers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Il reste&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">seats</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">passengers</span><span class="p">),</span> <span class="s1">&#39;places&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Le véhicule est rempli&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="built-in-functions">Built in Functions</h3>
<p><a href="https://docs.python.org/3/library/functions.html">Python Doc</a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">all</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>                                   <span class="c1"># Return True if all elements of the iterable are true (or if the iterable is empty)</span>
<span class="nb">any</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>                                   <span class="c1"># Return True if any element of the iterable is true. If the iterable is empty, return False.</span>
<span class="nb">chr</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>                                          <span class="c1"># chr(97) returns the string &#39;a&#39; (invers of ord())</span>
<span class="nb">delattr</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>                           <span class="c1"># delattr(x, &#39;foobar&#39;) is equivalent to del x.foobar</span>
<span class="nb">dict</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="o">**</span><span class="n">kwarg</span><span class="p">)</span>                         <span class="c1"># Create a new dictionary</span>
<span class="nb">dir</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>                                       <span class="c1"># displays attributes and methods of object &#39;list&#39;</span>
<span class="n">help</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>                                      <span class="c1"># displays documentation of object &#39;list&#39;</span>
<span class="nb">isinstance</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">classinfo</span><span class="p">)</span>                   <span class="c1"># Return True if the object argument is an instance of the classinfo argument</span>
<span class="nb">iter</span><span class="p">(</span><span class="nb">object</span><span class="p">[,</span> <span class="n">sentinel</span><span class="p">])</span>                        <span class="c1"># Return an iterator object.</span>
<span class="nb">map</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">iterable</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>                    <span class="c1"># Return an iterator that applies function to every item of iterable, yielding the results</span>
<span class="nb">ord</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>                                          <span class="c1"># ord(&#39;a&#39;) returns the integer 97 and ord(&#39;€&#39;) returns 8364</span>
<span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="o">...</span><span class="p">)</span>                        <span class="c1">#</span>
<span class="nb">pow</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">exp</span><span class="p">[,</span><span class="n">mod</span><span class="p">])</span>                            <span class="c1"># Return base to the power exp; if mod is present, return base to the power exp, modulo mod (computed more efficiently than pow(base, exp) % mod)</span>
<span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">iterables</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>                   <span class="c1"># Iterate over several iterables in parallel, producing tuples with an item from each one</span>

<span class="s1">&#39;__class__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__delattr__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__dir__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__doc__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__eq__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__format__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__ge__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__getattribute__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__gt__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__hash__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__init__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__init_subclass__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__le__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__lt__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__ne__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__new__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__reduce__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__reduce_ex__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__repr__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__setattr__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__sizeof__&#39;</span><span class="p">,</span>
<span class="s1">&#39;__str__&#39;</span><span class="p">,</span>                                     <span class="c1"># when own class : better than method like display() </span>
<span class="s1">&#39;__subclasshook__&#39;</span>

<span class="c1"># redefine built-in</span>
<span class="n">Class</span> <span class="n">Complexe</span><span class="p">:</span>
    <span class="o">...</span>
    <span class="k">def</span> <span class="nf">mod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">partie_re</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span>      <span class="c1"># renvoie (sqrt(a² + b²))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">partie_im</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>                    <span class="c1"># new built-in method __lt__ redefined</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mod</span><span class="p">()</span><span class="o">.</span><span class="fm">__lt__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

<span class="n">z1</span> <span class="o">=</span> <span class="n">Complexe</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">z2</span> <span class="o">=</span> <span class="n">Complexe</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">z1</span><span class="o">&lt;</span><span class="n">z2</span><span class="p">)</span>                                    <span class="c1"># prints True</span>
</code></pre></div></td></tr></table></div>
<h3 id="decorators">Decorators</h3>
<p>Predefined Decorators</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@functools</span><span class="o">.</span><span class="n">wrap</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>                           <span class="c1"># keep properties with func</span>
<span class="nd">@functools</span><span class="o">.</span><span class="n">lru_cache</span><span class="p">()</span>                          <span class="c1"># speed up execution time</span>
</code></pre></div></td></tr></table></div>
<p>Decorator with <strong>no arguments</strong> and <strong>return nothing</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">do_twice</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper_do_twice</span><span class="p">():</span>
        <span class="n">func</span><span class="p">()</span>
        <span class="n">func</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">wrapper_do_twice</span>

<span class="nd">@do_twice</span>
<span class="k">def</span> <span class="nf">say_whee</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Whee!&quot;</span><span class="p">)</span>

<span class="c1"># results ############################################# </span>
<span class="c1"># Whee!</span>
<span class="c1"># Whee!</span>
</code></pre></div></td></tr></table></div>
<p>Decorator with <strong>arguments</strong> and <strong>return nothing</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">do_twice</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper_do_twice</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>              <span class="c1"># *args, **kwargs added</span>
        <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>                           <span class="c1"># *args, **kwargs added</span>
        <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>                           <span class="c1"># *args, **kwargs added</span>
    <span class="k">return</span> <span class="n">wrapper_do_twice</span>

<span class="nd">@do_twice</span>
<span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hello </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">greet</span><span class="p">(</span><span class="s2">&quot;World&quot;</span><span class="p">)</span>

<span class="c1"># results ############################################# </span>
<span class="c1"># Hello World</span>
<span class="c1"># Hello World</span>
</code></pre></div></td></tr></table></div>
<p>Decorator with <strong>arguments</strong> and <strong>return something</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">do_twice</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper_do_twice</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>                    <span class="c1"># return added</span>
    <span class="k">return</span> <span class="n">wrapper_do_twice</span>

<span class="nd">@do_twice</span>
<span class="k">def</span> <span class="nf">return_greeting</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Creating greeting&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Hi </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="n">return_greeting</span><span class="p">(</span><span class="s2">&quot;Adam&quot;</span><span class="p">)</span>

<span class="c1"># results ############################################# </span>
<span class="c1"># Creating greeting</span>
<span class="c1"># Creating greeting</span>
<span class="c1"># &#39;Hi Adam&#39;                                             # return value of the last execution sent</span>
</code></pre></div></td></tr></table></div>
<p>Decorator with <strong>arguments</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">repeat</span><span class="p">(</span><span class="n">num_times</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">decorator_repeat</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="nd">@functools</span><span class="o">.</span><span class="n">wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">wrapper_repeat</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_times</span><span class="p">):</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">wrapper_repeat</span>
    <span class="k">return</span> <span class="n">decorator_repeat</span>

<span class="nd">@repeat</span><span class="p">(</span><span class="n">num_times</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Hello </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">greet</span><span class="p">(</span><span class="s2">&quot;World&quot;</span><span class="p">)</span>

<span class="c1"># results ############################################# </span>
<span class="c1"># Hello World</span>
<span class="c1"># Hello World</span>
<span class="c1"># Hello World</span>
<span class="c1"># Hello World</span>
</code></pre></div></td></tr></table></div>
<p>Decorator <strong>chained</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">print_before_execution</span><span class="p">(</span><span class="n">function</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">print_then_execute</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;voici ce que renvoie la fonction </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">function</span><span class="o">.</span><span class="vm">__name__</span><span class="p">))</span>
        <span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">print_then_execute</span>

<span class="k">def</span> <span class="nf">print_after_execution</span><span class="p">(</span><span class="n">function</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">execute_then_print</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;La fonction a fini de tourner&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">execute_then_print</span>

<span class="nd">@print_after_execution</span>
<span class="nd">@print_before_execution</span>
<span class="k">def</span> <span class="nf">print_hello_world</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hello world&#39;</span><span class="p">)</span>

<span class="n">print_hello_world</span><span class="p">()</span>

<span class="c1"># results ############################################# </span>
<span class="c1"># voici ce que renvoie la fonction print_hello_world</span>
<span class="c1"># hello world</span>
<span class="c1"># La fonction a fini de tourner</span>
</code></pre></div></td></tr></table></div></p>
<h3 id="threading">Threading</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Thread</span>

<span class="k">def</span> <span class="nf">calcul</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">x</span><span class="o">*</span><span class="n">x</span>

<span class="n">th</span><span class="o">=</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">calcul</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,))</span>                  <span class="c1"># create thread</span>
<span class="n">th</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>                                          <span class="c1"># start thread </span>
<span class="n">th</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>                                           <span class="c1"># completion of thread</span>
</code></pre></div></td></tr></table></div>
<h3 id="multiprocessing">Multiprocessing</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Pool</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">Pool</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="k">as</span> <span class="n">p</span><span class="p">:</span>                              <span class="c1"># number of process (max ~ 60x Windows)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>                  <span class="c1"># apply f to 1, 2 and 3 on 5 processes      </span>
</code></pre></div></td></tr></table></div>
<p>The <strong>Process class</strong> has equivalents of all the methods of <strong>threading.Thread</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">multiprocessing</span> <span class="kn">import</span> <span class="n">Process</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">f</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;bob&#39;</span><span class="p">,))</span>
    <span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">p</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</code></pre></div></td></tr></table></div></p>
<h3 id="coroutines">Coroutines</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">func</span><span class="p">())</span>                                 <span class="c1"># run coroutine func() </span>
                                                    <span class="c1"># This function always creates a new event loop and closes it at the end. </span>
                                                    <span class="c1"># It should be used as a main entry point for asyncio programs, </span>
                                                    <span class="c1"># and should ideally only be called once</span>

<span class="k">await</span> <span class="n">func</span><span class="p">()</span>                                        <span class="c1"># run coroutine in Jupyter Notebook</span>
<span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="n">name_async</span><span class="p">(</span><span class="s1">&#39;Daniel&#39;</span><span class="p">),</span>          <span class="c1"># gather async function and run them with await</span>
                     <span class="n">name_async</span><span class="p">(</span><span class="s1">&#39;Donna&#39;</span><span class="p">),</span>           <span class="c1"># result is an aggregate list of returned values</span>
                     <span class="n">name_async</span><span class="p">(</span><span class="s1">&#39;Diane&#39;</span><span class="p">))</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">ensure_future</span><span class="p">(</span><span class="n">name_async</span><span class="p">())</span>                 <span class="c1"># create task for concurrency</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="n">name_async</span><span class="p">())</span>                   <span class="c1"># create task for concurrency (preferred way)</span>
</code></pre></div></td></tr></table></div>
<h1 id="tests">TESTS</h1>
<h3 id="librairies">Librairies</h3>
<ul>
<li>unittest (avec classe)</li>
<li>pytest (sans classe)</li>
<li>doctest (standard library)</li>
</ul>
<h3 id="strategie-de-test">Stratégie de test</h3>
<ul>
<li>Tester l'INTERFACE des objets</li>
<li>3 sens de messages : entrants, internes et sortants.</li>
<li>2 types : requête et commande<ul>
<li>entrants:<ul>
<li>requête &gt; test avec assertions avec ce quelle doivent renvoyer</li>
<li>commande &gt; assert avec les changements directs</li>
</ul>
</li>
<li>internes:<ul>
<li>requête &gt; ignorer (car si le test entrant se passe bien &gt; le fonctionnement interne est OK)</li>
<li>commande &gt; ignorer</li>
</ul>
</li>
<li>sortants:<ul>
<li>requête &gt; ignorer</li>
<li>commande &gt; attendre à envoyer / utiliser des mocks</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="doctest">Doctest</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">doctest</span>

<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given two integers, return the sum.</span>

<span class="sd">    :param a: int</span>
<span class="sd">    :param b: int</span>
<span class="sd">    :return: int</span>

<span class="sd">    &gt;&gt;&gt; add(2, 3)</span>
<span class="sd">    5</span>
<span class="sd">    &gt;&gt;&gt; add(3, 3)</span>
<span class="sd">    6</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">()</span>

<span class="c1">###</span>
<span class="n">Output</span>
<span class="n">TestResults</span><span class="p">(</span><span class="n">failed</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">attempted</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>
<p>Tester avec : python -m doctest -v program/world.py</p>
</li>
<li>
<p>Sinon créer un fichier de test à part:</p>
<ul>
<li>Ecrire d'abord les tests en texte puis implémenter les en classes</li>
</ul>
</li>
</ul>
<h3 id="pytest">PyTest</h3>
<ul>
<li>recherche <code>test_*.py</code> ou <code>*_test.py</code></li>
<li>recherche ensuite les fonctions et méthodes en dehors des classes commençant par <code>test</code></li>
<li>recherche ensuite les fonctions et méthodes préfixer par <code>test</code> dans les classes commençant par <code>Test</code></li>
<li>créer des mock avec monkey...</li>
<li>setup() : avant test - setup_module(module), setup_method(self, method), setup_function(function)</li>
<li>teardown() : après test</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">pip3</span> <span class="n">install</span> <span class="n">pytest</span>
<span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">pytest</span> <span class="n">code1_test</span><span class="o">.</span><span class="n">py</span>   <span class="c1"># python3 -m not mendatory</span>
</code></pre></div></td></tr></table></div>
<h3 id="coverage">Coverage</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">pip</span> <span class="n">install</span> <span class="n">coverage</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">pytest</span><span class="o">-</span><span class="n">cov</span>

<span class="n">pytest</span> <span class="o">--</span><span class="n">cov</span><span class="o">=</span><span class="n">program</span> <span class="o">--</span><span class="n">cov</span><span class="o">-</span><span class="n">report</span> <span class="n">html</span> <span class="n">test_</span><span class="o">*.</span><span class="n">py</span>
<span class="c1"># crée:</span>
<span class="c1"># - 1 fichier HTML &quot;index.html&quot; dans le dossier &quot;htmlcov&quot; qui affiche le tableau de coverage</span>
<span class="c1"># - 1 fichier HTML par fichier testé pour le détail</span>
</code></pre></div></td></tr></table></div>
<hr />
<h1 id="libraries">LIBRARIES</h1>
<h3 id="os">os</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><code>import os

path = &quot;/home/olivier/scripts/cgi-bin/action.py&quot;
os.path.dirname(path)
&#39;/home/olivier/scripts/cgi-bin&#39;

os.path.basename(path)
&#39;action.py&#39;

os.path.join(path, &quot;func&quot;)
&#39;/home/olivier/scripts/cgi-bin/action.py/func&#39;

os.path.split(path)
(&#39;/home/olivier/scripts/cgi-bin&#39;, &#39;action.py&#39;)

os.path.abspath(&quot;.&quot;)
&#39;/home/olivier&#39;

os.listdir(&quot;/home/olivier&quot;)
[&#39;.bash_history&#39;, &#39;Images&#39;, &#39;script.py&#39;]

os.makedirs(path)                                   # Créer récursivement tous les dossiers d&#39;un path si ceux-ci n&#39;existent pas
os.mkdir(path)                                      # Créer le dernier dossier d&#39;un path. Si un des dossiers n&#39;existe pas une erreur est retournée
os.remove(path)                                     # Supprime le fichier / dossier indiqué
os.rename(old, new)                                 # Renomme le fichier / dossier indiqué

FILE = os.path.realpath(os.path.join(os.path.dirname(__file__), &#39;..&#39;,&#39;data&#39;, &#39;api_keys.txt&#39;)) # translate &quot;..&quot; into real path


folder_path = &quot;/mnt/box/files&quot;
for path, dirs, files in os.walk(folder_path):
    for filename in files:
        print(filename)
</code></pre></div></td></tr></table></div>
<h3 id="dotenv">dotenv</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">pip</span> <span class="n">install</span> <span class="n">python</span><span class="o">-</span><span class="n">dotenv</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span>

<span class="n">load_dotenv</span><span class="p">()</span>  <span class="c1"># take environment variables from .env.</span>

<span class="c1"># Code of your application, which uses environment variables (e.g. from `os.environ` or</span>
<span class="c1"># `os.getenv`) as if they came from the actual environment.</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">dotenv</span> <span class="kn">import</span> <span class="n">dotenv_values</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">dotenv_values</span><span class="p">(</span><span class="s2">&quot;.env&quot;</span><span class="p">)</span>  <span class="c1"># config = {&quot;USER&quot;: &quot;foo&quot;, &quot;EMAIL&quot;: &quot;foo@example.org&quot;}</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">dotenv</span> <span class="kn">import</span> <span class="n">dotenv_values</span>

<span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="o">**</span><span class="n">dotenv_values</span><span class="p">(</span><span class="s2">&quot;.env.shared&quot;</span><span class="p">),</span>  <span class="c1"># load shared development variables</span>
    <span class="o">**</span><span class="n">dotenv_values</span><span class="p">(</span><span class="s2">&quot;.env.secret&quot;</span><span class="p">),</span>  <span class="c1"># load sensitive variables</span>
    <span class="o">**</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">,</span>  <span class="c1"># override loaded values with environment variables</span>
<span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="random">random</h4>
<p>Pas pour des projets de sécurité (cf. module "secrets")
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">seq</span><span class="p">)</span>                                                  <span class="c1"># choose one item among list &quot;seq&quot;</span>
<span class="n">random</span><span class="o">.</span><span class="n">choices</span><span class="p">(</span><span class="n">population</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="o">*</span><span class="p">,</span> <span class="n">cum_weights</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">N</span><span class="p">)</span>   <span class="c1"># random draw N item among population</span>
<span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">x</span><span class="p">[,</span> <span class="n">random</span><span class="p">])</span>
<span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">population</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">counts</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
<span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="n">random</span><span class="o">.</span><span class="n">gauss</span><span class="p">(</span><span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span><span class="p">)</span>
</code></pre></div></td></tr></table></div></p>
<h3 id="argparse">argparse</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">argparse</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Process some integers.&#39;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;integers&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;N&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s1">&#39;an integer for the accumulator&#39;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--sum&#39;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s1">&#39;accumulate&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_const&#39;</span><span class="p">,</span>
                    <span class="n">const</span><span class="o">=</span><span class="nb">sum</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="nb">max</span><span class="p">,</span>
                    <span class="n">help</span><span class="o">=</span><span class="s1">&#39;sum the integers (default: find the max)&#39;</span><span class="p">)</span>

<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">accumulate</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">integers</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
<h3 id="logging">logging</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">logging</span>

<span class="c1"># Logging level</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>

<span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Request success : </span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Request failure : </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
<h3 id="json">json</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># export to json and format with indent (else just one line)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;arrivals.json&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">json</span><span class="p">(),</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="c1"># deal with unicode character</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;updates.json&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">poi_new_schema</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>   

<span class="c1"># export list to JSON file</span>
<span class="nb">list</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;key&#39;</span><span class="p">:</span><span class="s1">&#39;value&#39;</span><span class="p">,</span><span class="s1">&#39;key2&#39;</span><span class="p">:</span><span class="s1">&#39;value&#39;</span><span class="p">},{</span><span class="s1">&#39;key&#39;</span><span class="p">:</span><span class="s1">&#39;value&#39;</span><span class="p">,</span><span class="s1">&#39;key2&#39;</span><span class="p">:</span><span class="s1">&#39;value&#39;</span><span class="p">},</span><span class="o">...</span><span class="p">]</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;arrivals.json&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="c1"># convert dict to JSON object</span>
<span class="n">obj</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">market_data</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">pydantic_encoder</span><span class="p">)</span>

<span class="c1"># import json file</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;departures.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">dep</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="c1"># string to JSON (plusieurs doc JSON importés depuis un fichier à retransformé</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;airlines.json&#39;</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
        <span class="n">l</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>          <span class="c1"># l est au format JSON et line string</span>
        <span class="o">...</span>

<span class="c1"># Export to JSON 1 line / document</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;airports.json&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">airports</span><span class="p">[</span><span class="s2">&quot;Airport&quot;</span><span class="p">]:</span>
        <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># convert string to JSON</span>
<span class="n">index</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">[</span>
<span class="s2">  {</span>
<span class="s2">    &quot;label&quot;: &quot;VILLA GALLO-ROMAINE DU GROSSWALD&quot;,</span>
<span class="s2">    &quot;lastUpdateDatatourisme&quot;: &quot;2023-01-01T05:07:52.747Z&quot;,</span>
<span class="s2">  },</span>
<span class="s2">  {</span>
<span class="s2">    &quot;label&quot;: &quot;PARC DU TONNEAU&quot;,</span>
<span class="s2">    &quot;lastUpdateDatatourisme&quot;: &quot;2023-01-02T05:07:52.747Z&quot;,</span>
<span class="s2">  }</span>
<span class="s2">]</span>
<span class="s2">&quot;&quot;&quot;</span>
<span class="n">ind</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ind</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>                  <span class="c1"># i est un dict</span>
</code></pre></div></td></tr></table></div>
<h3 id="pickle">pickle</h3>
<p><strong>Serializing</strong> : Save the state of an object into memory or a file (.pkl for example)
<strong>Deserializing</strong> : retrieve an object from memory or a file (.pkl for example)</p>
<p>Formats for serializing : <code>pickle</code>, <code>JSON</code>, <code>XML</code>, <code>HDF5</code></p>
<p>Advantages of Pickle :
- can serialize almost every commonly used built-in Python (unlike JSON...)
- good choice when storing recursive structures since it only writes an object once.</p>
<p>Disadvantages of Pickle : 
- unsafe because it can execute malicious Python callables to construct objects.
- Python-specific module, and you may struggle to deserialize pickled objects when using a different language.
- appears to be slower and produces larger serialized values than formats such as JSON and ApacheThrift.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># save object</span>
<span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">fix_imports</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">buffer_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">fix_imports</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">buffer_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="c1"># retrieve object</span>
<span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">fix_imports</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;ASCII&#39;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;strict&#39;</span><span class="p">,</span> <span class="n">buffers</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">fix_imports</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="err">”</span><span class="n">ASCII</span><span class="err">”</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="err">”</span><span class="n">strict</span><span class="err">”</span><span class="p">,</span> <span class="n">buffers</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p><strong>Write CSV vs Pickle</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># write to CSV</span>
<span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;pandas_dataframe.csv&#39;</span><span class="p">)</span>
<span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
<span class="o">-------</span>
<span class="mf">0.19349145889282227</span>


<span class="c1"># write to Pickle</span>
<span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">(</span><span class="s2">&quot;my_pandas_dataframe.pkl&quot;</span><span class="p">)</span>
<span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
<span class="o">-------</span>
<span class="mf">0.0059659481048583984</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>Read CSV vs Pickle</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Reading the csv file into Pandas:</span>
<span class="n">start1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">df_csv</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;my_pandas_dataframe.csv&quot;</span><span class="p">)</span>
<span class="n">end1</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
<span class="o">-------</span>
<span class="mf">0.00677490234375</span>


<span class="c1"># Reading the Pickle file into Pandas:</span>
<span class="n">start2</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">df_pkl</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s2">&quot;my_pandas_dataframe.pkl&quot;</span><span class="p">)</span>
<span class="n">end2</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">end2</span> <span class="o">-</span> <span class="n">start2</span><span class="p">)</span>
<span class="o">-------</span>
<span class="mf">0.0009608268737792969</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>ML Models</strong></p>
<p>Pickle allows to serialize machine learning models in their <strong>existing state</strong>.
It makes it possible to use them again as needed.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LinearRegression</span>
<span class="kn">from</span> <span class="nn">sklearn.datasets</span> <span class="kn">import</span> <span class="n">make_regression</span>

<span class="c1"># generate regression dataset</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">make_regression</span><span class="p">(</span><span class="n">n_samples</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">n_features</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">noise</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># train regression model</span>
<span class="n">linear_model</span> <span class="o">=</span> <span class="n">LinearRegression</span><span class="p">()</span>
<span class="n">linear_model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

<span class="c1"># summary of the model</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model intercept :&#39;</span><span class="p">,</span> <span class="n">linear_model</span><span class="o">.</span><span class="n">intercept_</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model coefficients : &#39;</span><span class="p">,</span> <span class="n">linear_model</span><span class="o">.</span><span class="n">coef_</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model score : &#39;</span><span class="p">,</span> <span class="n">linear_model</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
<span class="o">------</span>
<span class="n">Model</span> <span class="n">intercept</span> <span class="p">:</span> <span class="o">-</span><span class="mf">0.010109549594702116</span>
<span class="n">Model</span> <span class="n">coefficients</span> <span class="p">:</span>  <span class="p">[</span><span class="mf">44.18793068</span> <span class="mf">98.97389468</span> <span class="mf">58.17121618</span><span class="p">]</span>
<span class="n">Model</span> <span class="n">score</span> <span class="p">:</span>  <span class="mf">0.9999993081899219</span>

<span class="c1"># Serializing</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;linear_regression.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">linear_model</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Deserializing</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;linear_regression.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">unpickled_linear_model</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="c1"># summary of the model</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model intercept :&#39;</span><span class="p">,</span> <span class="n">unpickled_linear_model</span><span class="o">.</span><span class="n">intercept_</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model coefficients : &#39;</span><span class="p">,</span> <span class="n">unpickled_linear_model</span><span class="o">.</span><span class="n">coef_</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Model score : &#39;</span><span class="p">,</span> <span class="n">unpickled_linear_model</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
<span class="o">------</span>
<span class="n">Model</span> <span class="n">intercept</span> <span class="p">:</span> <span class="o">-</span><span class="mf">0.010109549594702116</span>
<span class="n">Model</span> <span class="n">coefficients</span> <span class="p">:</span>  <span class="p">[</span><span class="mf">44.18793068</span> <span class="mf">98.97389468</span> <span class="mf">58.17121618</span><span class="p">]</span>
<span class="n">Model</span> <span class="n">score</span> <span class="p">:</span>  <span class="mf">0.9999993081899219</span>
</code></pre></div></td></tr></table></div>
<p><strong>Speeding up</strong></p>
<p><em>Pickle</em>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;df1.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
<span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
<span class="o">------</span>
<span class="mf">0.006001710891723633</span>
</code></pre></div></td></tr></table></div></p>
<p><em>PROTOCOL property</em>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;df2.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="n">pickle</span><span class="o">.</span><span class="n">HIGHEST_PROTOCOL</span><span class="p">)</span>
    <span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
<span class="o">------</span>
<span class="mf">0.0030384063720703125</span><span class="err">```</span>

<span class="o">*</span><span class="n">cPickle</span><span class="o">*</span>
<span class="err">```</span><span class="n">python</span>
<span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;df3.pkl&quot;</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">cPickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
<span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="p">)</span>
<span class="o">------</span>
<span class="mf">0.004027366638183594</span>
</code></pre></div></td></tr></table></div></p>
<h3 id="numpy">numpy</h3>
<p>fast numerical calculation
<a href="https://numpy.org/doc/stable/reference/">numpy website</a></p>
<p><strong>create table</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>                       <span class="c1"># Création d&#39;une matrice de dimensions 5x10 remplie de zéros</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>                    <span class="c1"># Création d&#39;une matrice à 3 dimensions 3x10x10 remplie de uns</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="o">*</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)])</span>              <span class="c1"># [0, 2, 4, 6, ..., 18] Création d&#39;un array à partir d&#39;une liste définie en compréhension</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>                            <span class="c1"># Création d&#39;un array à partir d&#39;une liste de listes</span>
              <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
              <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>

<span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">start</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span> <span class="n">stop</span> <span class="o">=</span> <span class="mf">0.15</span><span class="p">,</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">15</span><span class="p">))</span>   <span class="c1"># [0.01, 0.02, ..., 0.15] define 1D array with number of values</span>


<span class="n">X_1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">X_2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">X_3</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">X_1</span><span class="p">,</span> <span class="n">X_2</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>          <span class="c1"># Concatenate arrays with care to dimensions (axis 0 = rows, axis 1 = columns)</span>

<span class="c1"># defines array with step size</span>
<span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>                                        <span class="c1"># returns array([0, 1, 2])</span>
<span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span>                                      <span class="c1"># returns array([3, 4, 5, 6])</span>
<span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>                                    <span class="c1"># defines array([3, 5]) with step size</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">6.4</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">1.6</span><span class="p">])</span>
<span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">])</span>
<span class="n">inds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">digitize</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">bins</span><span class="p">)</span>                         <span class="c1"># inds returns array([1, 4, 3, 2])</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>select and slicing</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">X</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>                                             <span class="c1"># affichage de l&#39;élément à l&#39;index (4, 3)</span>
<span class="n">X</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>                                        <span class="c1"># assignation de la valeur -1 à l&#39;élément d&#39;index (1, 5)</span>
<span class="n">X</span><span class="p">[</span><span class="n">X</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>                                          <span class="c1"># conditionnal assignment</span>
<span class="n">X</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span><span class="mi">7</span><span class="p">]</span>                                    <span class="c1"># slicing N dimension (négative possible)</span>


<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span> 
<span class="n">X</span><span class="p">[</span><span class="n">y</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>                                      <span class="c1"># On assigne la valeur -1 aux éléments de X pour lesquels la valeur de y à l&#39;indice correspondant vaut 1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="n">y</span> <span class="o">==</span> <span class="mi">0</span><span class="p">])</span>                                    <span class="c1"># Affichage des éléments de X pour lesquels la valeur de y à l&#39;indice correspondant vaut 0</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>math functions</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">decimals</span> <span class="o">=</span> <span class="n">n</span><span class="p">)</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>shape</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">X</span><span class="o">.</span><span class="n">shape</span>                                             <span class="c1"># X dimensions ex: (3,4)</span>
<span class="n">X</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">4</span>  <span class="mi">5</span>  <span class="mi">6</span>  <span class="mi">7</span>  <span class="mi">8</span>  <span class="mi">9</span> <span class="mi">10</span><span class="p">]</span>                  <span class="c1"># reshaping (must have same number of elements)</span>
<span class="n">X_reshaped</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="p">[[</span><span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">4</span>  <span class="mi">5</span><span class="p">]</span>
  <span class="p">[</span><span class="mi">6</span>  <span class="mi">7</span>  <span class="mi">8</span>  <span class="mi">9</span> <span class="mi">10</span><span class="p">]]</span>
</code></pre></div></td></tr></table></div>
<strong>operations</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">M</span><span class="o">*</span><span class="n">N</span>                                                 <span class="c1"># product element by element wirh *</span>
<span class="n">M</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>                                            <span class="c1"># matrix product with dot()</span>

<span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">probs</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span><span class="o">&gt;</span><span class="mf">0.4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>                        <span class="c1"># returns 1 if probs[:,1]&gt;0.4, 0 else</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>broadcasting</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># broadcasting matrix and constante</span>
<span class="n">M</span><span class="o">=</span><span class="p">[[</span> <span class="mi">1</span>  <span class="mi">2</span>  <span class="mi">3</span>  <span class="mi">4</span>  <span class="mi">5</span><span class="p">]</span>
  <span class="p">[</span> <span class="mi">6</span>  <span class="mi">7</span>  <span class="mi">8</span>  <span class="mi">9</span> <span class="mi">10</span><span class="p">]]</span>
<span class="n">c</span><span class="o">=</span><span class="mi">4</span>                                                 
<span class="n">M</span><span class="o">+</span><span class="n">c</span>                                                 <span class="c1"># c is transformed in a matrix of shape M</span>
<span class="p">[[</span> <span class="mi">5</span>  <span class="mi">6</span>  <span class="mi">7</span>  <span class="mi">8</span>  <span class="mi">9</span><span class="p">]</span>
  <span class="p">[</span> <span class="mi">10</span>  <span class="mi">11</span>  <span class="mi">12</span>  <span class="mi">13</span> <span class="mi">14</span><span class="p">]]</span>

<span class="c1"># broadcasting matrix and vector (check for same dimension or dimension 1)</span>
<span class="n">M</span><span class="o">=</span><span class="p">[[</span> <span class="mi">3</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">]</span>
   <span class="p">[</span><span class="o">-</span><span class="mi">2</span> <span class="mi">1</span> <span class="mi">5</span><span class="p">]]</span>
<span class="n">v</span><span class="o">=</span><span class="p">[[</span><span class="mi">2</span><span class="p">]</span>    <span class="o">=&gt;</span>    <span class="n">v</span><span class="o">=</span><span class="p">[[</span><span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">]</span>                          <span class="c1"># v is broadcasted on his dimension of size 1</span>
   <span class="p">[</span><span class="mi">5</span><span class="p">]]</span>            <span class="p">[</span><span class="mi">5</span> <span class="mi">5</span> <span class="mi">5</span><span class="p">]]</span>
<span class="n">M</span><span class="o">*</span><span class="n">v</span><span class="o">=</span><span class="p">[[</span> <span class="mi">6</span> <span class="mi">2</span> <span class="mi">4</span><span class="p">]</span>
     <span class="p">[</span><span class="o">-</span><span class="mi">10</span> <span class="mi">5</span> <span class="mi">25</span><span class="p">]]</span>
<span class="n">u</span><span class="o">=</span><span class="p">[[</span><span class="mi">3</span> <span class="mi">4</span><span class="p">]]</span>
<span class="n">v</span><span class="o">+</span><span class="n">u</span><span class="o">=</span><span class="p">[[</span><span class="mi">2</span> <span class="mi">2</span><span class="p">]</span>   <span class="o">+</span>   <span class="p">[[</span><span class="mi">3</span> <span class="mi">4</span><span class="p">]</span>                             <span class="c1"># v and u are broadcasted on their dimension of size 1</span>
     <span class="p">[</span><span class="mi">5</span> <span class="mi">5</span><span class="p">]]</span>       <span class="p">[</span><span class="mi">3</span> <span class="mi">4</span><span class="p">]]</span>                                

 <span class="c1"># Le broadcasting nous permet de faire cette opération sans boucle for sur les lignes</span>
<span class="n">X_tilde</span><span class="p">[:,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">X</span><span class="p">[:,</span><span class="n">j</span><span class="p">]</span><span class="o">-</span><span class="n">min_Xj</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">max_Xj</span><span class="o">-</span><span class="n">min_Xj</span><span class="p">)</span>     <span class="c1"># operate on each item of column j </span>
</code></pre></div></td></tr></table></div></p>
<p><strong>statistics</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
              <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>

<span class="n">A</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>                                      <span class="c1"># return mean on columns</span>
<span class="n">A</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>                                       <span class="c1"># return sum</span>
<span class="n">A</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>                                       <span class="c1"># return standard deviation</span>
<span class="n">A</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>                                       <span class="c1"># return min</span>
<span class="n">A</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>                                       <span class="c1"># return max</span>
<span class="n">A</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>                                    <span class="c1"># return index of min value</span>
<span class="n">A</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>                                    <span class="c1"># return index of max value</span>
</code></pre></div></td></tr></table></div></p>
<h3 id="pandas">pandas</h3>
<p>Library for manipulating and analyze data
<a href="https://pandas.pydata.org/docs/reference/index.html">pandas website</a></p>
<p><strong>DataFrame</strong></p>
<blockquote>
<p>Un DataFrame est une matrice (dont chaque ligne et chaque colonne porte un indice) 
qui sert à stocker des bases de données.
La colonne contenant les numérotations des lignes est appelée l'index
et ne se gère pas de la même façon qu'une colonne du dataset</p>
</blockquote>
<p>Indexation :
- par défaut (numéros des lignes)
- une des colonnes du DataFrame
- liste que l'on définit nous-même</p>
<p>Différence avec array Numpy
- un DataFrame est beaucoup plus lisible
- le type des éléments peut varier
- La classe DataFrame contient davantage de méthodes pour la manipulation et le pré-traitement de bases de données</p>
<p><strong>create df</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>                             <span class="c1"># import pandas with alias pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>         <span class="c1"># data = np.array/liste/dict/pd.DataFrame</span>

<span class="n">dictionnaire</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Produit&quot;</span>          <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;miel&#39;</span><span class="p">,</span> <span class="s1">&#39;farine&#39;</span><span class="p">,</span> <span class="s1">&#39;vin&#39;</span><span class="p">],</span>
                <span class="s2">&quot;Date d&#39;expiration&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;10/08/2025&#39;</span><span class="p">,</span> <span class="s1">&#39;25/09/2024&#39;</span><span class="p">,</span> <span class="s1">&#39;15/10/2023&#39;</span><span class="p">],</span>
                <span class="s2">&quot;Quantité&quot;</span>         <span class="p">:</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">1800</span><span class="p">],</span> 
                <span class="s2">&quot;Prix à l&#39;unité&quot;</span>   <span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">]}</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">dictionnaire</span><span class="p">)</span>                 <span class="c1"># load data from a dictionary</span>

<span class="c1"># load from multipule existing list</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">titre_SC</span><span class="p">,</span><span class="n">annee_sortie_SC</span><span class="p">,</span><span class="n">note_SC</span><span class="p">)),</span> 
                  <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Titre&quot;</span><span class="p">,</span><span class="s2">&quot;Annee_sortie_SC&quot;</span><span class="p">,</span><span class="s2">&quot;Note_SC&quot;</span><span class="p">])</span>


<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">filepath_or_buffer</span><span class="p">,</span>            <span class="c1"># load data with CSV</span>
                 <span class="n">sep</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="p">,</span>                     <span class="c1"># Add ?raw=true at the end of the https:// filename if it fails</span>
                 <span class="n">header</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                 <span class="n">index_col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>


<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>      <span class="c1"># set this to see all the columns at a time           </span>
</code></pre></div></td></tr></table></div></p>
<p><strong>overview of df</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>                                       <span class="c1"># return columns type </span>
<span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>                                       <span class="c1"># columns infos</span>
<span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;date_operation&#39;</span><span class="p">])</span>            <span class="c1"># convert column to date type</span>
<span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>                                   <span class="c1"># for the whole dataset</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>                        <span class="c1"># Counting unique categorical variable. must be done on one column</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">dropna</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>            <span class="c1"># Counting occurences as well as missing values</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>          <span class="c1"># get the relative frequency</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>                                       <span class="c1"># display first rows (5 by default)</span>
<span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>                                       <span class="c1"># display last rows (5 by default)</span>
<span class="n">df</span><span class="o">.</span><span class="n">columns</span>                                      <span class="c1"># return a list of column</span>
<span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>      <span class="c1"># lower column name and replace &#39; &#39; by &#39;_&#39;</span>
                <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
<span class="n">df</span><span class="o">.</span><span class="n">shape</span>                                        <span class="c1"># return a tuple of the shape</span>
<span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>                                         <span class="c1"># number of rows</span>
<span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>                                 <span class="c1"># number of columns</span>
<span class="n">df</span><span class="o">.</span><span class="n">size</span>                                         <span class="c1"># number of elements</span>

<span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col1&#39;</span><span class="p">],</span>                   <span class="c1"># table with number of rows containing both item from col1 </span>
            <span class="n">columns</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col2&#39;</span><span class="p">],</span>                 <span class="c1"># and item from col2</span>
            <span class="n">rownames</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">colnames</span><span class="o">=</span><span class="kc">None</span>        <span class="c1"># name of index and column for the new table</span>
            <span class="n">margins</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>                      <span class="c1"># margins count the total amount of one row or column</span>
            <span class="n">margins_name</span><span class="o">=</span><span class="s2">&quot;Total&quot;</span><span class="p">,</span>               <span class="c1">#</span>
            <span class="n">dropna</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>                        <span class="c1"># </span>
            <span class="n">normalize</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>                    <span class="c1"># percentage of time each combination occurs</span>
                                                <span class="c1"># - all or True: from total population,</span>
                                                <span class="c1"># - index : will normalize over each row</span>
                                                <span class="c1"># - column : will normalize over each row</span>

<span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col1&#39;</span><span class="p">],</span>
            <span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col7&#39;</span><span class="p">],</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col4&#39;</span><span class="p">],])</span>
</code></pre></div></td></tr></table></div>
<strong>statistics</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;number&#39;</span><span class="p">)</span>              <span class="c1"># select only numerical features in df</span>
<span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;O&#39;</span><span class="p">)</span>                   <span class="c1"># select only string features in df</span>
<span class="n">df</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>                                       <span class="c1"># df mean</span>
<span class="n">df</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>                                     <span class="c1"># df median</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="n">q</span><span class="o">=</span><span class="p">[</span><span class="mf">0.25</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.75</span><span class="p">])</span>           <span class="c1"># col quantiles </span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>                                 <span class="c1"># col std</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">between</span><span class="p">(</span><span class="n">int1</span><span class="p">,</span><span class="n">int2</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>        <span class="c1"># boolean true if value in col is between int1 and int2 (cast as int)</span>

<span class="n">pd</span><span class="o">.</span><span class="n">qcut</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">],</span> <span class="mi">4</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;q1&#39;</span><span class="p">,</span> <span class="s1">&#39;q2&#39;</span><span class="p">,</span> <span class="s1">&#39;q3&#39;</span><span class="p">,</span> <span class="s1">&#39;q4&#39;</span><span class="p">])</span>  <span class="c1"># Discretize variable into equal-sized buckets based on rank or based on sample quantiles</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>Select/locate</strong>
Lorsque nous préparons un jeu de données pour l'exploiter plus tard, 
il est préférable de séparer les variables catégorielles des variables quantitatives
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># new dataframe df from df transactions</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">transactions</span><span class="p">[</span><span class="s1">&#39;cust_id&#39;</span><span class="p">]</span>                    <span class="c1"># extract one column</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">transactions</span><span class="p">[[</span><span class="s2">&quot;cust_id&quot;</span><span class="p">,</span><span class="s2">&quot;Qty&quot;</span><span class="p">]]</span>            <span class="c1"># extract multiple column</span>

<span class="c1"># select rows from a df with loc (multiple  results if index not unique)</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>                                   <span class="c1"># index can be list of index or slicing (indexes must be unique in that case)</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="n">idx1</span><span class="p">,</span> <span class="n">idx2</span><span class="p">,</span> <span class="o">...</span><span class="p">]]</span>  
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="n">indexrows</span><span class="p">][</span><span class="n">columns</span><span class="p">]]</span>                    <span class="c1"># columns to extract</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;toto&#39;</span><span class="p">),</span><span class="s1">&#39;col&#39;</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;new_val&#39;</span>   <span class="c1"># replace value based on conditions                 </span>

<span class="c1"># select rows from a dataframe with iloc (like for a numpy array)</span>
<span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>                               <span class="c1"># only with numerical index of rows and columns</span>

<span class="n">df1</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[:</span><span class="mi">4</span><span class="p">]]</span>                        <span class="c1"># select first 4 column [0..3]</span>
<span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">4</span><span class="p">:]]</span>                        <span class="c1"># select from 4th column until last [4..n]</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>Conditionnal indexing of df</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># 2 way:</span>
<span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col 2&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span><span class="p">]</span>                            <span class="c1"># return only a copy. cannot be used for assignment</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col 2&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span><span class="p">]</span>                        <span class="c1"># must be used if assignment</span>


<span class="n">df</span><span class="p">[</span><span class="o">~</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">]</span>                            <span class="c1"># not ~</span>
<span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)]</span>          <span class="c1"># or |</span>
<span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)]</span>          <span class="c1"># and &amp;</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>transform</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">duplicated</span><span class="p">()</span>                                 <span class="c1"># show duplicates</span>
<span class="n">df</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;AUS&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>                            <span class="c1"># replace each item &#39;AUS&#39; with 1</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;toto&#39;</span><span class="p">),</span><span class="s1">&#39;col&#39;</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;new_val&#39;</span>   <span class="c1"># replace value based on conditions  </span>
<span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s1">&#39;old_name&#39;</span><span class="p">:</span> <span class="s1">&#39;new&#39;</span><span class="p">},</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>        <span class="c1"># rename column &#39;old_name&#39; with &#39;new&#39; </span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">astype</span><span class="p">({</span><span class="s1">&#39;col&#39;</span><span class="p">:</span> <span class="s1">&#39;int&#39;</span><span class="p">})</span>                  <span class="c1"># change column type of &#39;col&#39; to &#39;int&#39;</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">)</span>             <span class="c1">#</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;col&quot;</span><span class="p">],</span><span class="n">errors</span><span class="o">=</span><span class="s1">&#39;X&#39;</span><span class="p">)</span> <span class="c1"># convert col type to numeric (float64 or int64 depending on the data supplied) X = &#39;raise&#39;, &#39;ignore&#39;, &#39;coerce&#39;</span>
<span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;price&#39;</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>                    <span class="c1"># remove &#39;price&#39; column</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="o">.</span><span class="n">col</span> <span class="o">==</span> <span class="mi">50</span><span class="p">)</span> <span class="o">&amp;</span>                <span class="c1"># remove lines where col = 50 and col2 = toto</span>
                <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">col2</span> <span class="o">==</span> <span class="s1">&#39;toto&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>     <span class="c1"># </span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;col1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">func1</span><span class="p">)</span>                         <span class="c1"># apply func1 to every item of col1</span>

<span class="c1"># Pay attention with following</span>
<span class="n">df</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="s1">&#39;row&#39;</span><span class="p">,</span> <span class="s1">&#39;col&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>               <span class="c1"># set value to [row,col] item</span>
<span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="s1">&#39;row&#39;</span><span class="p">,</span> <span class="s1">&#39;col&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>                     <span class="c1"># set value to [row,col] item</span>

<span class="n">s</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">len</span><span class="p">()</span>                                     <span class="c1"># length of each string element  </span>
<span class="n">s</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>                                   <span class="c1"># uppercase letters</span>
<span class="n">s</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>                                   <span class="c1"># lowercase letters</span>
<span class="n">s</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>                              <span class="c1"># Uppercase first letter</span>
<span class="n">s</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">swapcase</span><span class="p">()</span>                                <span class="c1"># swap upper to lower and vice versa</span>
<span class="n">s</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">title</span><span class="p">()</span>                                   <span class="c1"># Uppercase first letter of each word</span>
<span class="n">s</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;%&#39;</span><span class="p">)</span>                                <span class="c1"># remove &#39;%&#39; from right and left of s</span>
<span class="n">s</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>                                 <span class="c1"># concatenate list element in Series with &#39;-&#39;. NaN if one element is not a string</span>
<span class="n">s</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>              <span class="c1"># expand lets the split values in separate column</span>

<span class="c1"># remove accents from column &#39;Titre&#39;</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;Titre&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;Titre&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="s1">&#39;NFKD&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

<span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">itertuples</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>     <span class="c1"># returns list of tuples (as row of df)</span>

<span class="c1"># discretisation</span>
<span class="n">test_gre</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;gre&#39;</span><span class="p">],</span>
                  <span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">450</span><span class="p">,</span> <span class="mi">550</span><span class="p">,</span> <span class="mi">620</span><span class="p">,</span> <span class="mi">800</span><span class="p">],</span>
                  <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;mauvais&#39;</span><span class="p">,</span> <span class="s1">&#39;moyen&#39;</span><span class="p">,</span> <span class="s1">&#39;moyen +&#39;</span><span class="p">,</span> <span class="s1">&#39;bon&#39;</span><span class="p">])</span>

<span class="c1"># dichotomisation / one hot encoding</span>
<span class="n">one_hot</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df_items</span><span class="p">[</span><span class="s2">&quot;subtype&quot;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">drop_first</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">df_items_one_hot</span> <span class="o">=</span> <span class="n">df_items</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">one_hot</span><span class="p">)</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>missing values</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># detection</span>
<span class="n">df</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span>                                       <span class="c1"># return a df with True or false for each value</span>
<span class="n">df</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>                         <span class="c1"># columns with at least 1 NaN return true</span>
<span class="n">df</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>                         <span class="c1"># rows with at least 1 NaN return true</span>
<span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)]</span>                     <span class="c1"># conditionnal indexing to return only rows with NaN</span>
<span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>                       <span class="c1"># number of NaN by column</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">(),:]</span>                    <span class="c1"># show rows of NaN for &#39;col&#39;</span>

<span class="c1"># Adding missing values</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">103</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;cp&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">NaN</span>    <span class="c1"># add 5 NaN in column &#39;cp&#39;</span>
<span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">103</span><span class="p">],</span> <span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">NaN</span>       <span class="c1"># add 5 NaN in 13th column</span>

<span class="c1"># replacement   </span>
<span class="n">df</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>                                    <span class="c1"># replace all NaN with 0</span>
<span class="n">df</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>                            <span class="c1"># replace all NaN with df mean (could be median, min,max...)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>                            <span class="c1"># replace NAN of &#39;col&#39; by -1</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mode</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>                                <span class="c1"># mode of&#39;col&#39;</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mode</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>           <span class="c1"># replace NAN of &#39;store_type&#39; by his mode</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;col&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>        <span class="c1"># replace NaN of column &#39;col&#39; by 0</span>

<span class="c1"># remove    </span>
<span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">how</span> <span class="o">=</span> <span class="s1">&#39;any&#39;</span><span class="p">)</span>                <span class="c1"># remove rows if at least 1 NaN in the row</span>
<span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">how</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">)</span>                <span class="c1"># remove columns if all NaN in the column</span>
<span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">how</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">,</span>                <span class="c1"># remove rows if all NaN in the 3 columns</span>
          <span class="n">subset</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;col2&#39;</span><span class="p">,</span><span class="s1">&#39;col3&#39;</span><span class="p">,</span><span class="s1">&#39;col4&#39;</span><span class="p">])</span>  
</code></pre></div></td></tr></table></div></p>
<p><strong>processing</strong><br />
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># merge </span>
<span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df1</span><span class="p">,</span><span class="n">df2</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>                  <span class="c1"># concat df1 and df2 horizontally and fill with NaN if not same number of rows</span>
<span class="n">df1</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">right</span> <span class="o">=</span> <span class="n">df2</span><span class="p">,</span>                          <span class="c1"># right join df1 and df2 on &#39;col&#39;</span>
          <span class="n">on</span> <span class="o">=</span> <span class="s1">&#39;col&#39;</span><span class="p">,</span> <span class="n">how</span> <span class="o">=</span> <span class="s1">&#39;right&#39;</span><span class="p">)</span>    
<span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Nom&#39;</span><span class="p">)</span>                             <span class="c1"># set new index for df with column &#39;Nom&#39;</span>
<span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>                                <span class="c1"># reset default index</span>
<span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>                       <span class="c1"># reset default index </span>
<span class="n">df</span><span class="o">.</span><span class="n">index</span>                                        <span class="c1"># get index of df</span>

<span class="c1"># sort</span>
<span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span> <span class="o">=</span> <span class="s1">&#39;col&#39;</span><span class="p">,</span> <span class="n">ascending</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;col1&#39;</span><span class="p">,</span> <span class="s1">&#39;col3&#39;</span><span class="p">],</span> <span class="n">ascending</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

<span class="c1"># group, agg</span>
<span class="n">functions_to_apply</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;col1&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">,</span> <span class="s1">&#39;sum&#39;</span><span class="p">],</span>
    <span class="s1">&#39;col3&#39;</span> <span class="p">:</span> <span class="n">func1</span>
    <span class="p">}</span>
<span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;col&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">functions_to_apply</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;nom_dept&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;count&#39;</span><span class="p">:[</span><span class="s1">&#39;sum&#39;</span><span class="p">,</span><span class="s1">&#39;mean&#39;</span><span class="p">]})</span>
<span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;UTC_Offset&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;IATA_Airport&#39;</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[[</span><span class="s1">&#39;IATA_Airport&#39;</span><span class="p">]]</span>

<span class="c1"># nomalization</span>
<span class="n">normalized_df</span><span class="o">=</span><span class="p">(</span><span class="n">df</span><span class="o">-</span><span class="n">df</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span><span class="o">/</span><span class="n">df</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>           <span class="c1"># mean normalization</span>
<span class="n">normalized_df</span><span class="o">=</span><span class="p">(</span><span class="n">df</span><span class="o">-</span><span class="n">df</span><span class="o">.</span><span class="n">min</span><span class="p">())</span><span class="o">/</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">-</span><span class="n">df</span><span class="o">.</span><span class="n">min</span><span class="p">())</span> <span class="c1"># min-max normalization</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>plot</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Diagramme en secteurs</span>
<span class="n">data</span><span class="p">[</span><span class="s2">&quot;categ&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;pie&#39;</span><span class="p">)</span>
<span class="c1"># Cette ligne assure que le pie chart est un cercle plutôt qu&#39;une éllipse</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span> 
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c1"># Affiche le graphique</span>

<span class="c1"># Histogramme</span>
<span class="n">data</span><span class="p">[</span><span class="s2">&quot;montant&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Histogramme plus beau (bin optimal k=[1+log2(n)])</span>
<span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">montant</span><span class="o">.</span><span class="n">abs</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">][</span><span class="s2">&quot;montant&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">density</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>evaluate</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">accuracy_score</span><span class="p">,</span> <span class="n">precision_score</span><span class="p">,</span> <span class="n">recall_score</span><span class="p">,</span> <span class="n">confusion_matrix</span>

<span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_test</span><span class="p">)</span>
<span class="n">precision_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_test</span><span class="p">)</span>


<span class="p">(</span><span class="n">VN</span><span class="p">,</span> <span class="n">FP</span><span class="p">),</span> <span class="p">(</span><span class="n">FN</span><span class="p">,</span> <span class="n">VP</span><span class="p">)</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_test_logr</span><span class="p">)</span>

<span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col1&#39;</span><span class="p">],</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col5&#39;</span><span class="p">])</span>              <span class="c1"># display table with frequency of modality</span>
<span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col1&#39;</span><span class="p">],</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col5&#39;</span><span class="p">],</span><span class="n">normalize</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># display by percentage in the column direction</span>
</code></pre></div></td></tr></table></div>
<h3 id="scipy">scipy</h3>
<h2 id="1-2-3from-scipystats-import-pearsonr-pearsonrdfbackers-dfpledged-coefficient-de-pearson-2-quantitative-values"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">pearsonr</span>

<span class="n">pearsonr</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;backers&#39;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;pledged&#39;</span><span class="p">])</span>          <span class="c1"># coefficient de pearson (2 quantitative values)</span>
</code></pre></div></td></tr></table></div></h2>
<h3 id="geopandas">geopandas</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">contextly</span> <span class="k">as</span> <span class="nn">ctx</span>  <span class="c1"># retrieves tile maps from the internet as basemaps for matplotlib </span>

<span class="n">ctx</span><span class="o">.</span><span class="n">add_basemap</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">crs</span> <span class="o">=</span> <span class="n">meuse</span><span class="o">.</span><span class="n">crs</span><span class="o">.</span><span class="n">to_string</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
<hr />
<h3 id="folium">folium</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code>import folium
map_osm = folium.Map(location=[location.latitude, location.longitude])

for ind, geo, com in df[[&#39;geometry&#39;, &#39;1_f_commune&#39;]].itertuples():
    map_osm.add_child(folium.RegularPolygonMarker(location=[geo.y,geo.x], popup=com,
                       fill_color=&#39;#132b5e&#39;, radius=5))

map_osm
</code></pre></div></td></tr></table></div>
<hr />
<h3 id="geopy">geopy</h3>
<h2 id="1-2-3-4-5-6-7-8-9-10-11-12-13-14-15-16from-geopygeocoders-import-nominatim-initialize-nominatim-api-geolocator-nominatimuser_agentmyapp-city-as-input-location-geolocatorgeocodenancy-printthe-latitude-of-the-location-is-locationlatitude-printthe-longitude-of-the-location-is-locationlongitude-latitude-longitude-as-input-coordinates-173850-784867-location-geolocatorreversecoordinates-city-addressgetcity-state-addressgetstate-country-addressgetcountry"><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">geopy.geocoders</span> <span class="kn">import</span> <span class="n">Nominatim</span>

<span class="c1"># Initialize Nominatim API</span>
<span class="n">geolocator</span> <span class="o">=</span> <span class="n">Nominatim</span><span class="p">(</span><span class="n">user_agent</span><span class="o">=</span><span class="s2">&quot;MyApp&quot;</span><span class="p">)</span>

<span class="c1"># City as Input</span>
<span class="n">location</span> <span class="o">=</span> <span class="n">geolocator</span><span class="o">.</span><span class="n">geocode</span><span class="p">(</span><span class="s2">&quot;Nancy&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The latitude of the location is: &quot;</span><span class="p">,</span> <span class="n">location</span><span class="o">.</span><span class="n">latitude</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The longitude of the location is: &quot;</span><span class="p">,</span> <span class="n">location</span><span class="o">.</span><span class="n">longitude</span><span class="p">)</span>

<span class="c1"># Latitude &amp; Longitude as Input</span>
<span class="n">coordinates</span> <span class="o">=</span> <span class="s2">&quot;17.3850 , 78.4867&quot;</span>
<span class="n">location</span> <span class="o">=</span> <span class="n">geolocator</span><span class="o">.</span><span class="n">reverse</span><span class="p">(</span><span class="n">coordinates</span><span class="p">)</span>
<span class="n">city</span> <span class="o">=</span> <span class="n">address</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;city&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="n">state</span> <span class="o">=</span> <span class="n">address</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="n">country</span> <span class="o">=</span> <span class="n">address</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;country&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div></h2>
<h3 id="time">time</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">time</span>

<span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>                                     <span class="c1"># Return the time in seconds since the epoch as a floating point number </span>
                                                <span class="c1"># Epoch time on Windows and most Unix : January 1, 1970, 00:00:00 (UTC) </span>

<span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%X</span><span class="s1">&#39;</span><span class="p">)</span>                             <span class="c1"># displays 17:13:52</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>                                   <span class="c1"># sleep for 5 sec</span>
<span class="n">time</span><span class="o">.</span><span class="n">ctime</span><span class="p">()</span>                                    <span class="c1"># take time in seconds and return &#39;Sun Jun 20 23:21:05 1993&#39;</span>
<span class="n">time</span><span class="o">.</span><span class="n">gmtime</span><span class="p">(</span><span class="mi">1561541</span><span class="p">)</span>                            <span class="c1"># Convert a time expressed in seconds since the epoch to a struct_time in UTC</span>
</code></pre></div></td></tr></table></div>
<h3 id="datetime">datetime</h3>
<p><strong>formats</strong>
%d Day of the month as a zero-padded decimal number.    01, 02, …, 31
%b Month as locale’s abbreviated name.                  Jan, Feb, …, Dec (en_US);
%m Month as a zero-padded decimal number.               01, 02, …, 12
%y Year without century as a zero-padded decimal.       00, 01, …, 99
%Y Year with century as a zero-padded decimal.          2012, 2013, …, 9999
%H Hour (24-hour clock) as a zero-padded decimal.       00, 01, …, 23
%M Minute as a zero-padded decimal number.              00, 01, …, 59
%S Second as a zero-padded decimal number.              00, 01, …, 59
%W Week number of the year (Monday as the first DoW)    00, 01, ..., 53</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>

<span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>                                  <span class="c1"># current date and time</span>
<span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>                                <span class="c1"># today date</span>

<span class="n">day</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>               <span class="c1"># 19</span>
<span class="n">month</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%b&quot;</span><span class="p">))</span>        <span class="c1"># Oct</span>
<span class="n">year</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%y&quot;</span><span class="p">)</span>              <span class="c1"># 22</span>

<span class="n">end_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>

<span class="n">date_minus_2d</span> <span class="o">=</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span> \      <span class="c1"># renvoi string ajd - 2jrs formaté</span>
        <span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%S.</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;Z&quot;</span>
</code></pre></div></td></tr></table></div>
<h3 id="matplotlib">Matplotlib</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>                              <span class="c1"># magic function for IPython to choose graphical library (inline = Notebook internal library)</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>                              <span class="c1"># figure container (axes, labels, data, etc..)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>                                 <span class="c1"># grid above figure</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">));</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span> <span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">l</span><span class="p">))</span>                     <span class="c1"># resize figure</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                         <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> 
                         <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span> <span class="c1"># display multiple subplots at once </span>


<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">t</span><span class="p">,</span><span class="s1">&#39;hy&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">t</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;g-&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">t</span><span class="o">**</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">50</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">50</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Abscisses&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Ordonnees&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Un exemple de graphe&quot;</span><span class="p">)</span>               <span class="c1"># graph title</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">]);</span>                  <span class="c1"># axis limit x(min,max) and y(min,max)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;sales_data.csv&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Month&#39;</span><span class="p">],</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Product1&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;Month&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;Prod1&#39;</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Ventes&quot;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;Month&#39;</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Product1&#39;</span><span class="p">,</span><span class="s1">&#39;Product2&#39;</span><span class="p">],</span> <span class="n">style</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;m--&quot;</span><span class="p">,</span> <span class="s2">&quot;c:.&quot;</span><span class="p">],</span> <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Ventes par mois&quot;</span><span class="p">);</span>

<span class="c1">#############</span>
<span class="c1"># graph types</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">0</span><span class="p">),</span>                      <span class="c1"># x and y (function)</span>
        <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span>                           <span class="c1"># color (can be : &#39;blue&#39;, &#39;g&#39;, &#39;0.75&#39;, &#39;#FF0000&#39;)</span>
        <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;solid&#39;</span><span class="p">,</span>                      <span class="c1"># linestyle (&#39;solid&#39;,&#39;dashed&#39;, &#39;dashdot&#39;, &#39;dotted&#39;)</span>
        <span class="n">label</span><span class="o">=</span><span class="s1">&#39;bleu&#39;</span><span class="p">)</span>                           <span class="c1"># legend</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>          <span class="c1"># bar plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>                                   <span class="c1"># step plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>                                <span class="c1"># scatter plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">yerr</span><span class="o">=</span><span class="n">dy</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;.k&#39;</span><span class="p">)</span>           <span class="c1"># when discrete value, plot error of value (often standard deviation)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>                                      <span class="c1"># Display graph</span>

<span class="c1">###########</span>
<span class="c1"># bar plots</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span> <span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mf">0.6</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">bottom</span> <span class="o">=</span> <span class="n">y1</span><span class="p">)</span>                     <span class="c1"># superpose les barres</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;un&#39;</span><span class="p">,</span> <span class="s1">&#39;deux&#39;</span><span class="p">,</span> <span class="s1">&#39;trois&#39;</span><span class="p">])</span>    <span class="c1"># replace 1,2,3 by &#39;un&#39;... on abscisses axis</span>
<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;Month&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Product1&#39;</span><span class="p">,</span> <span class="s1">&#39;Product2&#39;</span><span class="p">,</span> <span class="s1">&#39;Returns&#39;</span><span class="p">],</span><span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">rot</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1">###############</span>
<span class="c1"># scatter plots</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">),</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span> <span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>

<span class="c1">###########</span>
<span class="c1"># histogram</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="nb">range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">bins</span> <span class="o">=</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">36</span><span class="p">,</span><span class="mi">39</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="mi">43</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">49</span><span class="p">],</span> <span class="n">bins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="mi">50</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">range</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> 
            <span class="n">bins</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> 
            <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;#EE3459&#39;</span><span class="p">,</span>
            <span class="n">density</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
            <span class="n">orientation</span> <span class="o">=</span> <span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> 
            <span class="n">rwidth</span> <span class="o">=</span> <span class="mf">0.6</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">([</span><span class="n">df</span><span class="o">.</span><span class="n">Product1</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">Product2</span><span class="p">],</span> 
            <span class="n">bins</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;#f27750&#39;</span><span class="p">,</span> <span class="s1">&#39;#f7bf59&#39;</span><span class="p">],</span>
            <span class="n">label</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Product1&#39;</span><span class="p">,</span> <span class="s1">&#39;Product2&#39;</span><span class="p">],</span>
            <span class="n">histtype</span> <span class="o">=</span> <span class="s1">&#39;barstacked&#39;</span><span class="p">)</span>           

<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Product1&#39;</span><span class="p">,</span> <span class="s1">&#39;Product2&#39;</span><span class="p">],</span> <span class="n">bins</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="n">rwidth</span> <span class="o">=</span> <span class="mf">0.8</span> <span class="p">,</span> <span class="n">color</span><span class="o">=</span> <span class="p">[</span><span class="s1">&#39;#0c4c83&#39;</span><span class="p">,</span> <span class="s1">&#39;#830c4c&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">);</span>
<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Product1&#39;</span><span class="p">,</span> <span class="s1">&#39;Product2&#39;</span><span class="p">],</span> <span class="n">bins</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="n">subplots</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">rwidth</span> <span class="o">=</span> <span class="mf">0.8</span> <span class="p">,</span> <span class="n">color</span><span class="o">=</span> <span class="p">[</span><span class="s1">&#39;#0c4c83&#39;</span><span class="p">,</span> <span class="s1">&#39;#830c4c&#39;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">);</span>
<span class="n">df</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Product1&#39;</span><span class="p">,</span> <span class="s1">&#39;Product2&#39;</span><span class="p">],</span> <span class="n">bins</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="n">rwidth</span> <span class="o">=</span> <span class="mf">0.8</span> <span class="p">,</span> <span class="n">color</span><span class="o">=</span> <span class="p">[</span><span class="s1">&#39;#0c4c83&#39;</span><span class="p">]);</span>

<span class="c1">###########</span>
<span class="c1"># box plots</span>
<span class="n">plt</span><span class="o">.</span><span class="n">boxplot</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">]])</span>


<span class="n">df</span><span class="p">[</span><span class="s1">&#39;Mois&#39;</span><span class="p">]</span><span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">Month</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span> <span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">:])</span>
<span class="n">l</span><span class="o">=</span><span class="nb">list</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">Mois</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
    <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;Mois&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">][</span><span class="s1">&#39;Turnover&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">13</span><span class="p">),</span><span class="n">df</span><span class="o">.</span><span class="n">Mois</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>


<span class="n">df</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">column</span><span class="o">=</span> <span class="s1">&#39;Turnover&#39;</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="s1">&#39;Mois&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">));</span>   

<span class="c1">############ </span>
<span class="c1"># Pie Charts       </span>
<span class="n">plt</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">Turnover</span><span class="p">,</span> 
           <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Janv&#39;</span><span class="p">,</span> <span class="s1">&#39;Fev&#39;</span><span class="p">,</span> <span class="s1">&#39;Mars&#39;</span><span class="p">],</span>
           <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">],</span>
           <span class="n">explode</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span>                       <span class="c1"># extract on part</span>
           <span class="n">autopct</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;%&#39;</span><span class="p">,</span>  <span class="c1"># format percentage</span>
           <span class="n">pctdistance</span> <span class="o">=</span> <span class="mf">0.7</span><span class="p">,</span> <span class="n">labeldistance</span> <span class="o">=</span> <span class="mf">1.2</span><span class="p">,</span>      <span class="c1"># distance from center to display percentage</span>
           <span class="n">shadow</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>                               <span class="c1"># with shadow or not</span>


<span class="c1"># subplots</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">221</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)),</span> <span class="n">df</span><span class="o">.</span><span class="n">Product1</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s1">&#39;Product1&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">222</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">Product1</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">Product2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Product2&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Product1&#39;</span><span class="p">,</span> <span class="s1">&#39;Product2&#39;</span><span class="p">,</span> <span class="s1">&#39;Returns&#39;</span><span class="p">,</span> <span class="s1">&#39;Turnover&#39;</span><span class="p">],</span> <span class="n">subplots</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">style</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;b--&#39;</span><span class="p">,</span> <span class="s1">&#39;m:p&#39;</span><span class="p">,</span> <span class="s1">&#39;g-.&#39;</span><span class="p">,</span> <span class="s1">&#39;c-d&#39;</span><span class="p">],</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">));</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">Turnover</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span> <span class="s1">&#39;Boxplot&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">([</span><span class="mf">0.65</span><span class="p">,</span> <span class="mf">0.65</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">],</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;#ffe5c1&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">Turnover</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#FFC575&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Distribution&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">([]);</span>

<span class="c1">################</span>
<span class="c1"># figure et axes</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">121</span><span class="p">)</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">122</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;green&#39;</span><span class="p">);</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;random numbers&#39;</span><span class="p">)</span>

<span class="n">ax3</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">223</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>
<span class="n">ax4</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">224</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="n">ax2</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span><span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
        <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">500</span><span class="p">),</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;#33CCFF&#39;</span><span class="p">,</span><span class="n">marker</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span><span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-.&#39;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;courbe 1&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">21</span><span class="p">])</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span><span class="mi">15</span><span class="p">])</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">21</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s2">&quot;j +&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">21</span><span class="p">,</span><span class="mi">2</span><span class="p">)])</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Durée après le jour j&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">plot_date</span><span class="p">(</span><span class="n">dates</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">);</span>

<span class="c1">########</span>
<span class="c1"># LateX</span>
<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;$ f(x,y) = x^2 + 3 \times \cos(y) $&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">22</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;$\sin(2\pi x)\exp(-x)$ et les deux asymptotes $\pm\exp(-x)$&#39;</span><span class="p">)</span>

<span class="c1">###############</span>
<span class="c1"># contour plots</span>

<span class="n">x</span> <span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">200</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">200</span><span class="p">)</span>
<span class="n">X</span><span class="p">,</span> <span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="n">Z</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">X</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="p">(</span><span class="n">Y</span><span class="o">-</span><span class="n">X</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
<span class="n">cs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">contour</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">Z</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">clabel</span><span class="p">(</span><span class="n">cs</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">contourf</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">Z</span><span class="p">,</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>

<span class="c1">############</span>
<span class="c1"># polar plot</span>
<span class="n">theta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">1.</span><span class="o">/</span><span class="mf">180.</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> 
<span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="n">theta</span><span class="p">)</span> <span class="o">-</span> <span class="mf">2.</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">polar</span><span class="p">(</span><span class="n">theta</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rgrids</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">3.1</span><span class="p">,</span> <span class="mf">.7</span><span class="p">),</span> <span class="n">angle</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">thetagrids</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="mi">360</span><span class="p">,</span> <span class="mi">90</span><span class="p">)</span> <span class="p">);</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="s1">&#39;polar&#39;</span><span class="p">)</span>

<span class="c1">########</span>
<span class="c1"># images</span>

<span class="n">heart</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;heartbeat.png&#39;</span><span class="p">)</span> 
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">heart</span><span class="p">);</span>

<span class="c1"># ajouter une image à un graphique</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">hb</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;hb.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">140</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">260</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">hb</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">95</span><span class="p">,</span><span class="mi">130</span><span class="p">,</span><span class="s1">&#39;Electrocardiogramme&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;italic&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">heart</span><span class="p">,</span> <span class="n">extent</span> <span class="o">=</span> <span class="p">[</span><span class="mi">80</span><span class="p">,</span><span class="mi">170</span><span class="p">,</span><span class="mi">60</span><span class="p">,</span><span class="mi">140</span><span class="p">])</span> <span class="p">;</span>
</code></pre></div></td></tr></table></div>
<h3 id="dash-plotly">dash plotly</h3>
<p>When to use Graph Objects
https://plotly.com/python/graph-objects/</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>
</code></pre></div></td></tr></table></div>
<h3 id="sockets">sockets</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code>accept()                                    # accepte une connexion, retourne un nouveau socket et une adresse client 
bind(addr)                                  # associe le socket à une adresse locale
close()                                     # ferme le socket
connect(addr)                               # connecte le socket à une adresse distante 
connect_ex(addr)                            # connect, retourne un code erreur au lieu d&#39;une exception
dup()                                       # retourne un nouveau objet socket identique à celui en cours
fileno()                                    # retourne une description du fichier
getpeername()                               # retourne l&#39;adresse distante
getsockname()                               # retourne l&#39;adresse locale
getsockopt(level, optname[, buflen])        # retourne les options du socket
gettimeout()                                # retourne le timeout ou none
listen(n)                                   # commence à écouter les connexions entrantes
makefile([mode, [bufsize]])                 # retourne un fichier objet pour le socket
recv(buflen[, flags])                       # recoit des données
recv_into(buffer[, nbytes[, flags]])        # recoit des données (dans un buffer)
recvfrom(buflen[, flags])                   # reçoit des données et l&#39;adresse de l&#39;envoyeur
recvfrom_into(buffer[,nbytes,[,flags])      # reçoit des données et l&#39;adresse de l&#39;envoyeur (dans un buffer)
sendall(data[, flags])                      # envoye toutes les données
send(data[, flags])                         # envoye des données mais il se peut que pas toutes le soit
sendto(data[, flags], addr)                 # envoye des données à une adresse donnée
setblocking(0 | 1)                          # active ou désactive le blocage le flag I/O
setsockopt(level, optname, value)           # définit les options du socket
settimeout(None | float)                    # active ou désactive le timeout
shutdown(how)                               # fermer les connexions dans un ou les deux sens.
</code></pre></div></td></tr></table></div>
<h3 id="requests">requests</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;https://api.github.com/events&#39;</span><span class="p">)</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;https://httpbin.org/post&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">})</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">&#39;https://httpbin.org/put&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">})</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s1">&#39;https://httpbin.org/delete&#39;</span><span class="p">)</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="s1">&#39;https://httpbin.org/get&#39;</span><span class="p">)</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">options</span><span class="p">(</span><span class="s1">&#39;https://httpbin.org/get&#39;</span><span class="p">)</span>

<span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://...&quot;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
<span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;key1&#39;</span><span class="p">][</span><span class="s1">&#39;key2&#39;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<h3 id="other-librairies">other librairies</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">matplotlib</span>                          <span class="c1"># plot graphs</span>
<span class="n">statistics</span>                          <span class="c1"># deep into statistics </span>
<span class="n">sklearn</span>                             <span class="c1"># machine learning</span>
<span class="n">Beautiful</span> <span class="n">Soup</span>                      <span class="c1"># Web Scraping static</span>
<span class="n">Selenium</span>                            <span class="c1"># Web Scraping dynamic</span>
<span class="n">csv</span>                                 <span class="c1"># work with CSV files</span>
<span class="n">re</span>                                  <span class="c1"># regex manipulation      </span>
<span class="n">math</span>                                <span class="c1"># all math functions (cosinus,sinus,exp,etc.)</span>
<span class="n">sys</span>                                 <span class="c1"># sytem functions</span>
<span class="n">os</span>                                  <span class="c1"># OS functions</span>
<span class="n">calendar</span>                            <span class="c1"># calendar functions</span>
<span class="n">profile</span>                             <span class="c1"># analyse function execution</span>
<span class="n">urllib2</span>                             <span class="c1"># get internet informations</span>
<span class="n">cv2</span>                                 <span class="c1"># computer vision</span>
</code></pre></div></td></tr></table></div>
<h3 id="how-to-use-a-library">How to use a library</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">random</span> <span class="k">as</span> <span class="nn">rd</span>
<span class="kn">from</span> <span class="nn">randam</span> <span class="kn">import</span> <span class="n">choices</span> <span class="k">as</span> <span class="n">ch</span>
</code></pre></div></td></tr></table></div>
<hr />
<h1 id="domain-specific">DOMAIN SPECIFIC</h1>
<h2 id="web-scraping">WEB SCRAPING</h2>
<h3 id="beautifulsoup">BeautifulSoup</h3>
<p><strong>methods</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">pip</span> <span class="n">install</span> <span class="n">beautifulsoup4</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="c1"># beautifulsoup</span>
<span class="n">soup</span><span class="o">.</span><span class="n">title</span>                                              <span class="c1"># &lt;title&gt;The Dormouse&#39;s story&lt;/title&gt;</span>
<span class="n">soup</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">name</span>                                         <span class="c1"># u&#39;title&#39;</span>
<span class="n">soup</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">string</span>                                       <span class="c1"># u&#39;The Dormouse&#39;s story&#39;</span>
<span class="n">soup</span><span class="o">.</span><span class="n">p</span>                                                  <span class="c1"># &lt;p class=&quot;title&quot;&gt;&lt;b&gt;The Dormouse&#39;s story&lt;/b&gt;&lt;/p&gt;</span>
<span class="n">soup</span><span class="o">.</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">]</span>                                         <span class="c1"># u&#39;title&#39;</span>
<span class="n">soup</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span>                                  <span class="c1"># u&#39;head&#39;</span>
<span class="n">soup</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">contents</span>                                      <span class="c1"># # [&lt;title&gt;The Dormouse&#39;s story&lt;/title&gt;]</span>
<span class="n">soup</span><span class="o">.</span><span class="n">prettify</span>                                           <span class="c1"># align text</span>
<span class="n">soup</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span>                                         <span class="c1"># get all the text in the page</span>
<span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>                                      <span class="c1"># find all &lt;a&gt; element in the page</span>
<span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;link3&quot;</span><span class="p">)</span>
<span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">)</span>                                    <span class="c1"># find tags</span>
<span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;body a&quot;</span><span class="p">)</span>                                   <span class="c1"># Find tags beneath other tags (a beneath body)</span>
<span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;head &gt; title&quot;</span><span class="p">)</span>                             <span class="c1"># Find tags directly beneath other tags</span>
<span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;p &gt; a&quot;</span><span class="p">)</span>                                    <span class="c1"># </span>
<span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;#link1 ~ .sister&quot;</span><span class="p">)</span>                         <span class="c1"># Find siblings tags</span>
<span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;.sister&quot;</span><span class="p">)</span>                                  <span class="c1"># Find tags by CSS class</span>
<span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;[class~=sister]&quot;</span><span class="p">)</span>                          <span class="c1">#</span>
<span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;#link1&quot;</span><span class="p">)</span>                                   <span class="c1"># Find tags by ID</span>
<span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;#link1,#link2&quot;</span><span class="p">)</span>                            <span class="c1"># Find tags that match any selector from a list of selectors</span>
<span class="n">soup</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;a[href=&quot;http://example.com/elsie&quot;]&#39;</span><span class="p">)</span>       <span class="c1"># Find tags by value</span>

<span class="c1"># selenium</span>
<span class="c1"># for Colab</span>
<span class="err">!</span><span class="n">pip</span> <span class="n">install</span> <span class="n">selenium</span>
<span class="err">!</span><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span> <span class="c1"># to update ubuntu to correctly run apt install</span>
<span class="err">!</span><span class="n">apt</span> <span class="n">install</span> <span class="n">chromium</span><span class="o">-</span><span class="n">chromedriver</span>
<span class="err">!</span><span class="n">cp</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">chromium</span><span class="o">-</span><span class="n">browser</span><span class="o">/</span><span class="n">chromedriver</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;/usr/lib/chromium-browser/chromedriver&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
<span class="n">chrome_options</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">ChromeOptions</span><span class="p">()</span>
<span class="n">chrome_options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--headless&#39;</span><span class="p">)</span>
<span class="n">chrome_options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--no-sandbox&#39;</span><span class="p">)</span>
<span class="n">chrome_options</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;--disable-dev-shm-usage&#39;</span><span class="p">)</span>
<span class="n">wd</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Chrome</span><span class="p">(</span><span class="s1">&#39;chromedriver&#39;</span><span class="p">,</span><span class="n">options</span><span class="o">=</span><span class="n">chrome_options</span><span class="p">)</span>
<span class="n">wd</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://www.webite-url.com&quot;</span><span class="p">)</span>

<span class="c1"># googlesearch</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">googlesearch</span>                                <span class="c1"># pip installation</span>
<span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">googlesearch</span>               <span class="c1"># conda installation</span>
<span class="n">search</span><span class="p">(</span><span class="n">requête</span><span class="p">,</span>                                         <span class="c1"># (str) la requête que vous voulez exécuter </span>
       <span class="n">tld</span><span class="o">=</span><span class="s1">&#39;com&#39;</span><span class="p">,</span>                                       <span class="c1"># (str) le domaine</span>
       <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;en&#39;</span><span class="p">,</span>                                       <span class="c1"># (str) le langage</span>
       <span class="n">tbs</span><span class="o">=</span><span class="s1">&#39;o&#39;</span><span class="p">,</span>                                         <span class="c1"># (str) Time limits (i.e “qdr:h” =&gt; last hour, “qdr:d” =&gt; last 24 hours, “qdr:m” =&gt; last month).</span>
       <span class="n">num</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>                                          <span class="c1"># (int) nombre de résultat par page</span>
       <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>                                         <span class="c1"># (int) premier résultat à récupérer</span>
       <span class="n">stop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                                       <span class="c1"># (int) dernier resultat à récupérer. (None = forever)</span>
       <span class="n">pause</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span>                                       <span class="c1"># (float) delai entre les demandes HTTP</span>
      <span class="p">):</span>
<span class="n">lucky</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>                                  <span class="c1"># Shortcut to single-item search. Same arguments as the main search function, but the return value changes. </span>
<span class="n">get_tbs</span><span class="p">(</span><span class="n">from_date</span><span class="p">,</span> <span class="n">to_date</span><span class="p">)</span>                             <span class="c1"># Helper function to format the tbs parameter</span>


<span class="c1"># NewsPaper</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">newspaper3k</span>                                 <span class="c1"># pip installation</span>
<span class="kn">from</span> <span class="nn">newspaper</span> <span class="kn">import</span> <span class="n">Article</span>
<span class="n">article</span> <span class="o">=</span> <span class="n">Article</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">article</span><span class="o">.</span><span class="n">download</span><span class="p">()</span>
<span class="n">article</span><span class="o">.</span><span class="n">parse</span><span class="p">()</span>
<span class="n">article</span><span class="o">.</span><span class="n">text</span>

<span class="c1"># nltk</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">nltk</span>                                        <span class="c1"># pip installation</span>
<span class="n">nltk</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s1">&#39;punkt&#39;</span><span class="p">)</span>                                  <span class="c1"># installation package punkt</span>
<span class="n">article</span><span class="o">.</span><span class="n">nlp</span><span class="p">()</span>                                           <span class="c1"># make NLP work on &#39;article&#39;</span>
<span class="n">article</span><span class="o">.</span><span class="n">authors</span>                                         <span class="c1"># return name of authors</span>
<span class="n">article</span><span class="o">.</span><span class="n">publish_date</span>                                    <span class="c1"># return published date</span>
<span class="n">article</span><span class="o">.</span><span class="n">summary</span>                                         <span class="c1"># return summary</span>
<span class="n">article</span><span class="o">.</span><span class="n">keywords</span>                                        <span class="c1"># return keywords</span>
<span class="n">article</span><span class="o">.</span><span class="n">top_image</span>                                       <span class="c1"># return top image</span>
<span class="n">article</span><span class="o">.</span><span class="n">movies</span>                                          <span class="c1"># return </span>
</code></pre></div></td></tr></table></div></p>
<p><strong>interpreter example</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">pip</span> <span class="n">install</span> <span class="n">beautifulsoup4</span>

<span class="c1"># Récupération du titre de la page HTML</span>
<span class="o">&gt;&gt;</span> <span class="n">soup</span><span class="o">.</span><span class="n">title</span>
<span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;&lt;</span><span class="n">Les</span> <span class="n">chiens</span> <span class="n">les</span> <span class="n">plus</span> <span class="n">mignons</span><span class="o">&gt;&lt;/</span><span class="n">title</span><span class="o">&gt;</span>

<span class="c1"># Récupération de la chaîne de caractères du titre HTML</span>
<span class="o">&gt;&gt;</span> <span class="n">soup</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">string</span>
<span class="s2">&quot;Les chiens les plus mignons&quot;</span>

<span class="c1"># Trouver tous les éléments avec la balise &lt;a&gt;</span>
<span class="o">&gt;&gt;</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="p">[</span> <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;http://exemple.com/labradoodle&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;race&quot;</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;lien1&quot;</span><span class="o">&gt;</span><span class="n">LabraDoodle</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;http://exemple.com/retriever&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;race&quot;</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;lien2&quot;</span><span class="o">&gt;</span><span class="n">Golden</span> <span class="n">Retriever</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span><span class="p">,</span>
<span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;http://exemple.com/carlin&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;race&quot;</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;lien3&quot;</span><span class="o">&gt;</span><span class="n">Carlin</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span><span class="p">]</span>

<span class="c1"># Trouver les éléments avec l’id du « lien1 »</span>
<span class="o">&gt;&gt;</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;lien1&quot;</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;http://exemple.com/labradoodle&quot;</span> <span class="n">class</span><span class="o">=</span><span class="s2">&quot;race&quot;</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;lien1&quot;</span><span class="o">&gt;</span><span class="n">LabraDoodle</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>

<span class="c1">#Trouver tous les éléments p avec la classe « title »</span>
<span class="o">&gt;&gt;</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;title&quot;</span><span class="p">)</span>
<span class="s2">&quot;Les meilleures races de chiens&quot;</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>script example</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><code># 1
import requests
from bs4 import BeautifulSoup
url = &quot;https://www.gov.uk/search/news-and-communications&quot;
page = requests.get(url)
soup = BeautifulSoup(page.content, &#39;html.parser&#39;)

# 2
from urllib.request import urlopen
from bs4 import BeautifulSoup
page_SC = urlopen(&quot;https://www.gov.uk/search/news-and-communications&quot;)
soup = BeautifulSoup(page_SC, &#39;html.parser&#39;)

# 3
from bs4 import BeautifulSoup
from urllib.request import Request, urlopen
headers = {&#39;User-Agent&#39;: &#39;Mozilla/5.0&#39;}
url = &#39;https://www.nationsonline.org/oneworld/IATA_Codes/IATA_Code_A.htm&#39;
response = Request(url, headers = headers)
page = urlopen(response)
soup = BeautifulSoup(page, &#39;html.parser&#39;)

titres = soup.find_all(&quot;a&quot;, classstrip_=&quot;gem-c-document-list__item-title&quot;)
for title in titres:
    print(title.string,&quot;\n&quot;)

# trouve le nom aux balises &lt;a&gt; et classes &#39;elco-anchor&#39;
noms_SC = soup.findAll(name = &#39;a&#39;, attrs = {&#39;class&#39;: &#39;elco-anchor&#39;})



# Ouvrir fichier avec le package CSV
import csv

with open(&#39;couleurs_preferees.csv&#39;) as fichier_csv:
   reader = csv.DictReader(fichier_csv, delimiter=&#39;,&#39;)
   for ligne in reader:
      print(ligne[&#39;nom&#39;] + &quot; travaille en tant que &quot; + ligne[&#39;metier&#39;] + 
      &quot; et sa couleur préférée est &quot; + ligne[&#39;couleur_preferee&#39;])
      `
</code></pre></div></td></tr></table></div></p>
<hr />
<h1 id="data-cleaning">DATA CLEANING</h1>
<p><strong>purpose</strong>
- have a clean dataset to manipulate
- manage missing values (NaN)</p>
<p><strong>3 categories of transformation</strong>
- manage duplicates <em>(duplicated, drop_duplicates)</em>
- modify elements <em>(replace, rename, astype)</em>
- operations on DF values <em>(apply, lambda)</em></p>
<h2 id="duplicates">duplicates</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">duplicated</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">duplicated</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;col1&#39;</span><span class="p">,</span><span class="s1">&#39;col2&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">duplicated</span><span class="p">(</span><span class="n">keep</span><span class="o">=</span><span class="kc">False</span><span class="p">),:]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>      <span class="c1"># select all duplicates on columns col1 and col2</span>
<span class="n">df</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">keep</span><span class="o">=</span><span class="n">first</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>      <span class="c1"># be carful with inplace. let False by default</span>
</code></pre></div></td></tr></table></div>
<h2 id="replacing">replacing</h2>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">to_replace</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>

<span class="c1"># column renaming</span>
<span class="n">dictionnaire</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ancien_nom1&#39;</span><span class="p">:</span> <span class="s1">&#39;nouveau_nom1&#39;</span><span class="p">,</span>
                <span class="s1">&#39;ancien_nom2&#39;</span><span class="p">:</span> <span class="s1">&#39;nouveau_nom2&#39;</span><span class="p">}</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">dictionnaire</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># change column type </span>
<span class="c1"># Méthode 1 : </span>
<span class="n">dictionnaire</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;col_1&#39;</span><span class="p">:</span> <span class="s1">&#39;int&#39;</span><span class="p">,</span>
                <span class="s1">&#39;col_2&#39;</span><span class="p">:</span> <span class="s1">&#39;float&#39;</span><span class="p">}</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">dictionnaire</span><span class="p">)</span>
<span class="c1"># Méthode 2 : </span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;col_1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;col_1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="operations-on-values">operations on values</h2>
<p><strong>apply</strong>
df.apply(func, axis, ...)
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># define a function</span>
<span class="k">def</span> <span class="nf">get_day</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">d</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="c1"># apply function to column </span>
<span class="n">days</span> <span class="o">=</span> <span class="n">transactions</span><span class="p">[</span><span class="s1">&#39;tran_date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">get_day</span><span class="p">)</span>
<span class="c1"># create a new column</span>
<span class="n">transactions</span><span class="p">[</span><span class="s1">&#39;day&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">days</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>lambda</strong>
in combination with <em>apply</em>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># normal function</span>
<span class="k">def</span> <span class="nf">increment</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> 
   <span class="k">return</span> <span class="n">x</span><span class="o">+</span><span class="mi">1</span>
<span class="c1"># with lambda  </span>
<span class="n">increment</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="mi">1</span>

<span class="c1"># combining lambda and apply</span>
<span class="n">transactions</span><span class="p">[</span><span class="s1">&#39;day&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">transactions</span><span class="p">[</span><span class="s1">&#39;tran_date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">date</span><span class="p">:</span> <span class="n">date</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">transactions</span><span class="p">[</span><span class="s1">&#39;prod_cat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">transactions</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;str&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;prod_cat_code&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;prod_subcat_code&#39;</span><span class="p">],</span>
                                                            <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div></td></tr></table></div></p>
<h2 id="missing-values">missing values</h2>
<ul>
<li>detection <em>(isna,any)</em></li>
<li>replacement <em>(fillna)</em></li>
<li>remove <em>(dropna)</em></li>
</ul>
<p><strong>detection</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span>                                   <span class="c1"># return a df with True or false for each value</span>
<span class="n">df</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>                     <span class="c1"># columns with at least 1 NaN</span>
<span class="n">df</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>                     <span class="c1"># rows with at least 1 NaN</span>
<span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)]</span>                 <span class="c1"># conditionnal indexing to return only rows with NaN</span>
<span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>                   <span class="c1"># number of NaN by column</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>replacement</strong>
- variable of numerical type are often replaced with 
    - mean
    - median
    - min/max
- variable of categorical type are often replaced with 
    - mode
    - arbitrary constante (0, -1)</p>
<p>Be careful to select the right column to replace NaN</p>
<p><strong>fillna</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>                                <span class="c1"># replace NaN with 0</span>
<span class="n">df</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>                        <span class="c1"># replace NaN with column mean (could be median, min,max...)</span>

<span class="c1"># On remplace les NANs de &#39;prod_subcat_code&#39; par -1</span>
<span class="n">transactions</span><span class="p">[</span><span class="s1">&#39;prod_subcat_code&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">transactions</span><span class="p">[</span><span class="s1">&#39;prod_subcat_code&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># On détermine le mode de &#39;store_type&#39;</span>
<span class="n">store_type_mode</span> <span class="o">=</span> <span class="n">transactions</span><span class="p">[</span><span class="s1">&#39;store_type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span>

<span class="c1"># On remplace les NANs de &#39;store_type&#39; par son mode</span>
<span class="n">transactions</span><span class="p">[</span><span class="s1">&#39;store_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">transactions</span><span class="p">[</span><span class="s1">&#39;store_type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">transactions</span><span class="p">[</span><span class="s1">&#39;store_type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mode</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>

<span class="c1"># On vérifie que ces deux colonnes ne contiennent plus de NANs</span>
<span class="n">transactions</span><span class="p">[[</span><span class="s1">&#39;prod_subcat_code&#39;</span><span class="p">,</span> <span class="s1">&#39;store_type&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="c1"># voir les NaN d&#39;une colonne</span>
<span class="n">customer</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">customer</span><span class="p">[</span><span class="s1">&#39;city_code&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">(),:]</span>
</code></pre></div></td></tr></table></div>
<p><strong>dropna</strong>
removes rows or columns
dropna(axis, how, subset, ..)
- axis : 0 remove rows or 1 remove columns
- how : 'any' at least 1 NaN or 'all' all NaN
- subset : indicates rows/columns in which we search for NaN</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">how</span> <span class="o">=</span> <span class="s1">&#39;any&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">how</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">how</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">subset</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;col2&#39;</span><span class="p">,</span><span class="s1">&#39;col3&#39;</span><span class="p">,</span><span class="s1">&#39;col4&#39;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
<hr />
<h1 id="data-processing">DATA PROCESSING</h1>
<p><strong>filter, merge, sort et group</strong></p>
<h2 id="filter-indexation-conditionnelle">Filter (indexation conditionnelle)</h2>
<ul>
<li>'et' : &amp;</li>
<li>'ou' : |</li>
<li>'non' : -</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># &amp;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;annee&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1979</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;surface&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">60</span><span class="p">)])</span>
<span class="c1"># |</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;année&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1900</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;quartier&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Père-Lachaise&#39;</span><span class="p">)])</span>
<span class="c1"># -</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="o">-</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;quartier&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Bercy&#39;</span><span class="p">)])</span>
</code></pre></div></td></tr></table></div>
<h2 id="merge-df-with-concat-and-merge">Merge df with concat and merge</h2>
<h3 id="concat">concat</h3>
<p>pandas.concat(objs, axis..)
- <strong>obj</strong> : list of df
- <strong>axis</strong> : 0 (verticaly) ou 1 (horizontally)</p>
<p>if dimensions don't match, fill with NaN
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">part_1</span> <span class="o">=</span> <span class="n">transactions</span><span class="p">[</span><span class="n">transactions</span><span class="o">.</span><span class="n">columns</span><span class="p">[:</span><span class="mi">4</span><span class="p">]]</span>
<span class="n">part_2</span> <span class="o">=</span> <span class="n">transactions</span><span class="p">[</span><span class="n">transactions</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">4</span><span class="p">:]]</span>
<span class="n">union</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">part_1</span><span class="p">,</span><span class="n">part_2</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div></td></tr></table></div></p>
<h3 id="merge">merge</h3>
<p>2 df can be merge if 1 column in common
merge(right, on, how, ...)
- <strong>right</strong> : df to merge on the right with the one calling merge
- <strong>on</strong> : shared column
- <strong>how</strong> : joint (based on SQL)
    - <strong>'inner'</strong>: Default. Not recommended because of data loss but no NaN
    - <strong>'outer'</strong>: Keep all data but generate lot of NaN
    - <strong>'left'</strong> : all left data but only the right that match. Data loss and generate NaN
    - <strong>'right'</strong>: all right data but only the left that match. Data loss and generate NaN</p>
<blockquote>
<p>make a outer/right/left joint with dropna(how = 'any') is equivalent to inner joint</p>
<p>pay attention to index column that can change or be removed.</p>
</blockquote>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># example</span>
<span class="n">Personnes</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">right</span> <span class="o">=</span> <span class="n">Vehicule</span><span class="p">,</span> <span class="n">on</span> <span class="o">=</span> <span class="s1">&#39;Voiture&#39;</span><span class="p">,</span> <span class="n">how</span> <span class="o">=</span> <span class="s1">&#39;right&#39;</span><span class="p">)</span>

<span class="c1"># set new index for df with column name</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Nom&#39;</span><span class="p">)</span>

<span class="c1"># new index from numpy array or pandas series</span>
<span class="n">new_index</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;10000&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">)]</span>
<span class="n">index_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">new_index</span><span class="p">)</span>
<span class="n">index_series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">new_index</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">new_index</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">index_array</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">index_series</span><span class="p">)</span>

<span class="c1"># reset default index</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="c1"># get index of df</span>
<span class="n">df</span><span class="o">.</span><span class="n">index</span>
</code></pre></div></td></tr></table></div>
<h2 id="sort">Sort</h2>
<p>sort_values(by, ascending,...)
- by : column to sort
- ascending : (True or False) True by default</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_sorted</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span> <span class="o">=</span> <span class="s1">&#39;Points_bonus&#39;</span><span class="p">,</span> <span class="n">ascending</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">df_sorted</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Points_bonus&#39;</span><span class="p">,</span> <span class="s1">&#39;Note&#39;</span><span class="p">],</span> <span class="n">ascending</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>sort_index()
often combined with set_index()</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># On définit la colonne &#39;Note&#39; comme l&#39;index de df</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Note&#39;</span><span class="p">)</span>
<span class="c1"># On trie le DataFrame df selon son index</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<h2 id="group-agg">group, agg</h2>
<p><strong>groupby</strong> : return a DataFrameGroupBy
operations:
- <strong>split</strong> data
- <strong>apply</strong> function
- <strong>combine</strong> results</p>
<p><strong>agg</strong> : aggregate data
- dictionary :
    - key : column name
    - value : function to apply</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">functions_to_apply</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># Les méthodes statistiques classiques peuvent être renseignées avec</span>
    <span class="c1"># chaines de caractères</span>
    <span class="s1">&#39;total_amt&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">,</span> <span class="s1">&#39;sum&#39;</span><span class="p">],</span>
    <span class="s1">&#39;store_type&#39;</span> <span class="p">:</span> <span class="n">n_modalities</span>
    <span class="p">}</span>  

<span class="n">transactions</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;cust_id&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">functions_to_apply</span><span class="p">)</span>

<span class="c1"># example</span>
<span class="c1"># Quantité maximale</span>
<span class="n">max_qty</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">qty</span><span class="p">:</span> <span class="n">qty</span><span class="p">[</span><span class="n">qty</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="c1"># Quantité minimale</span>
<span class="n">min_qty</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">qty</span><span class="p">:</span> <span class="n">qty</span><span class="p">[</span><span class="n">qty</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
<span class="c1"># Quantité médiane</span>
<span class="n">median_qty</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">qty</span> <span class="p">:</span> <span class="n">qty</span><span class="p">[</span><span class="n">qty</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
<span class="c1"># Définition du dictionnaire de fonctions à appliquer</span>
<span class="n">functions_to_apply</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;qty&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="n">max_qty</span><span class="p">,</span> <span class="n">min_qty</span><span class="p">,</span> <span class="n">median_qty</span><span class="p">]</span>
<span class="p">}</span>
<span class="c1"># Operation groupby</span>
<span class="n">qty_groupby</span> <span class="o">=</span> <span class="n">transactions</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;cust_id&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">functions_to_apply</span><span class="p">)</span>
<span class="c1"># Pour un meilleur affichage, on peut renommer les colonnes produite par le groupby</span>
<span class="n">qty_groupby</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">set_levels</span><span class="p">([</span><span class="s1">&#39;max_qty&#39;</span><span class="p">,</span> <span class="s1">&#39;min_qty&#39;</span><span class="p">,</span> <span class="s1">&#39;median_qty&#39;</span><span class="p">],</span> <span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="crosstab">crosstab</h2>
<p>frequency of modality pairs 
crosstab(colonne1, colonne2, normalize = 1)
- normalize : display percentage  (0:rows, 1:columns) </p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">colonne1</span> <span class="o">=</span> <span class="n">transactions</span><span class="p">[</span><span class="s1">&#39;prod_cat_code&#39;</span><span class="p">]</span>
<span class="n">colonne2</span> <span class="o">=</span> <span class="n">transactions</span><span class="p">[</span><span class="s1">&#39;prod_subcat_code&#39;</span><span class="p">]</span>
<span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">colonne1</span><span class="p">,</span> <span class="n">colonne2</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<hr />
<h1 id="eda">EDA</h1>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># select country not in subset of valid countries to replace by NaN values</span>
<span class="n">VALID_COUNTRIES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;France&#39;</span><span class="p">,</span> <span class="s1">&#39;Côte d</span><span class="se">\&#39;</span><span class="s1">ivoire&#39;</span><span class="p">,</span> <span class="s1">&#39;Madagascar&#39;</span><span class="p">]</span>
<span class="n">mask</span> <span class="o">=</span> <span class="o">~</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;pays&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">VALID_COUNTRIES</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">,</span> <span class="s1">&#39;pays&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">NaN</span>
</code></pre></div></td></tr></table></div>
<hr />
<h1 id="machine-learning-regression">MACHINE LEARNING : Regression</h1>
<h2 id="regression-lineaire-univariee"><strong><em>*Régression Linéaire Univariée</em></strong>*</h2>
<p>y≈β1x+β0</p>
<p>y = target
x = feature
β = paramètre</p>
<h2 id="regression-lineaire-multiple"><strong><em>*Régression Linéaire Multiple</em></strong>*</h2>
<p>y≈ β0 + β1x1 + β2x2 + ⋯ + βpxp</p>
<p>≈ β0 + ∑j=1p βjxj</p>
<h2 id="probleme">Problème</h2>
<p>trouver les meilleurs β qui minimise l’erreur entre le modèle et les vraies valeurs</p>
<h3 id="scikit-learn"><strong>scikit-learn</strong></h3>
<p>pour résoudre les problèmes de machine learning</p>
<h2 id="etapes-a-la-base-de-toute-resolution-dun-probleme-de-machine-learning"><strong>Étapes</strong> à la base de toute résolution d'un problème de Machine Learning :</h2>
<ul>
<li>On prépare les données en <strong>séparant</strong> les variables <strong>explicatives</strong> de la variable <strong>cible</strong>.</li>
<li>On <strong>sépare</strong> le jeu de données en deux (un jeu d'<strong>entraînement</strong> et un jeu de <strong>test</strong>) à l'aide de la fonction <code>train_test_split</code> du sous-module <code>sklearn.model_selection</code>.</li>
<li>On <strong>instancie</strong> un modèle comme <code>LinearRegression</code> ou <code>GradientBoostingRegressor</code> grâce au constructeur de la classe.</li>
<li>On <strong>entraîne</strong> le modèle sur le jeu de données d'entraînement à l'aide de la méthode <strong><code>fit</code></strong>.</li>
<li>On effectue une <strong>prédiction</strong> sur les données de test grâce à la méthode <strong><code>predict</code></strong>.</li>
<li>On <strong>évalue les performances</strong> de notre modèle en calculant l'erreur entre ces prédictions et les véritables valeurs de la variable cible des données de <strong>test</strong>.</li>
</ul>
<h3 id="separation-colonnes-features-et-target">Separation colonnes features et target</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">X</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[:</span><span class="mi">15</span><span class="p">]]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">15</span><span class="p">:]]</span>

<span class="n">ou</span>

<span class="c1"># Variables explicatives</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;price&#39;</span><span class="p">],</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="c1"># Variable cible</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<h3 id="separate-dataset-between-train-and-test-dataset">Separate dataset between train and test dataset</h3>
<ul>
<li><strong>train</strong>: find the best β</li>
<li>
<p><strong>test</strong> : test the trained model to study his capacity to generalize predictions on data never seen befor</p>
<h3 id="train_test_split">train_test_split</h3>
<p>train_test_split(<em>arrays</em>, <em>test_size=None</em>, <em>train_size=None</em>, <em>random_state=None</em>, <em>shuffle=True</em>, <em>stratify=None</em>)</p>
<p><a href="https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.train_test_split.html">https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.train_test_split.html</a></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span> <span class="n">random_state</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p><strong>test_size</strong> : proportion of test dataset</p>
<p><strong>random_state :</strong> </p>
<ul>
<li><strong>‘</strong>None’ for different results for multiple calls.</li>
<li>Int for repeatible results</li>
</ul>
</li>
</ul>
<h3 id="create-a-regression-model">Create a regression model</h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LinearRegression</span>
</code></pre></div></td></tr></table></div>
<p>All model class have 2 methods to train and evaluate model:</p>
<ul>
<li><strong>fit</strong> : train model</li>
<li><strong>predict</strong> : predict results from features</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Instantiation du modèle</span>
<span class="n">lr</span> <span class="o">=</span> <span class="n">LinearRegression</span><span class="p">()</span>

<span class="c1"># Entraînement du modèle</span>
<span class="n">lr</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>

<span class="c1"># Prédiction de la variable cible pour le jeu de données TRAIN</span>
<span class="n">y_pred_train</span> <span class="o">=</span> <span class="n">lr</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>

<span class="c1"># Prédiction de la variable cible pour le jeu de données TEST</span>
<span class="n">y_pred_test</span> <span class="o">=</span> <span class="n">lr</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="evaluate-model">Evaluate model</h3>
<p><strong>Mean Squared Error</strong></p>
<p>difficult to interpret</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">mean_squared_error</span>
<span class="n">mean_squared_error</span><span class="p">(</span><span class="n">y_true</span> <span class="o">=</span> <span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred</span> <span class="o">=</span> <span class="n">y_pred_test</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p><strong>Mean Absolute Error</strong></p>
<p>same scale as target</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">mean_absolute_error</span>
<span class="n">mae_train</span> <span class="o">=</span> <span class="n">mean_absolute_error</span><span class="p">(</span><span class="n">y_train</span><span class="p">,</span> <span class="n">y_pred_train</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="overfitting">Overfitting</h2>
<p><strong>GradientBoost</strong> : learn well on train dataset but doesn’t generalize well</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">gbr</span> <span class="o">=</span> <span class="n">GradientBoostingRegressor</span><span class="p">(</span><span class="n">n_estimators</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span>
                                <span class="n">max_depth</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span>
                                <span class="n">max_features</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
                                <span class="n">validation_fraction</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="c1"># Fit</span>
<span class="n">gbr</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="c1"># Predict train</span>
<span class="n">y_pred_train_gbr</span> <span class="o">=</span> <span class="n">gbr</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>
<span class="c1"># Predict test</span>
<span class="n">y_pred_test_gbr</span> <span class="o">=</span> <span class="n">gbr</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

<span class="c1"># MSE train</span>
<span class="n">mse_train_gbr</span> <span class="o">=</span> <span class="n">mean_squared_error</span><span class="p">(</span><span class="n">y_train</span><span class="p">,</span> <span class="n">y_pred_train_gbr</span><span class="p">)</span>
<span class="c1"># MSE test</span>
<span class="n">mse_test_gbr</span> <span class="o">=</span> <span class="n">mean_squared_error</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_test_gbr</span><span class="p">)</span>

<span class="c1"># MAE train</span>
<span class="n">mae_train_gbr</span> <span class="o">=</span> <span class="n">mean_absolute_error</span><span class="p">(</span><span class="n">y_train</span><span class="p">,</span> <span class="n">y_pred_train_gbr</span><span class="p">)</span>
<span class="c1"># MAE test</span>
<span class="n">mae_test_gbr</span> <span class="o">=</span> <span class="n">mean_absolute_error</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_test_gbr</span><span class="p">)</span>

<span class="n">mean_price_gbr</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Relative error&quot;</span><span class="p">,</span> <span class="n">mae_test_gbr</span> <span class="o">/</span> <span class="n">mean_price_gbr</span><span class="p">)</span>

<span class="c1"># Results #########################</span>
<span class="c1"># MSE train gbr: 25799.588888888888</span>
<span class="c1"># MSE test gbr: 2626919.693281389</span>
<span class="c1"># MAE train gbr: 32.718518524427424</span>
<span class="c1"># MAE test gbr: 1189.7782300506872</span>
<span class="c1"># Relative error 0.10394953190531596</span>
</code></pre></div></td></tr></table></div>
<p>For <strong>regression</strong> with <strong><code>LinearRegression</code></strong> we had :</p>
<ul>
<li>MAE train lr: 1680.4078748721086</li>
<li>MAE test lr: 1773.9135394428085</li>
</ul>
<p>For <strong>regression</strong> with <strong><code>GradientBoostingRegressor</code></strong> we have :</p>
<ul>
<li>MAE train gbr: 20.740740828767215</li>
<li>MAE test gbr: 1442.6573741134125</li>
</ul>
<p><strong>Mean absolute error</strong> for <strong>train</strong> dataset is <strong>too low</strong> compare to <strong>test</strong> dataset <strong>too high.</strong> That ‘s why the performance of the model <strong>must be</strong> evaluated on <strong>test dataset.</strong></p>
<p><strong><code>GradientBoostingRegressor</code></strong> is better than <strong><code>LinearRegression</code></strong> though.</p>
<h2 id="polynomiale-regression"><strong><em>*Polynomiale Regression</em></strong>*</h2>
<p>y = β0 + β1x + β2x^2</p>
<p>Order 2</p>
<p>y ≈ β0 + β1x1^2 + β2x2^2+ β3x3^2+ β4x1x2+ β5x2x3 + β6x1x3</p>
<p>When features grow or Order higher, it leads to <strong>overfitting</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">PolynomialFeatures</span>

<span class="n">poly_feature_extractor</span> <span class="o">=</span> <span class="n">PolynomialFeatures</span><span class="p">(</span><span class="n">degree</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># Application de la transformation sur X_train et X_test</span>
<span class="n">X_train_poly</span> <span class="o">=</span> <span class="n">poly_feature_extractor</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>
<span class="n">X_test_poly</span> <span class="o">=</span> <span class="n">poly_feature_extractor</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p><strong>poly_feature_extractor</strong> is a <code>transformer</code> not a model:</p>
<ul>
<li><strong>fit</strong> : does nothing</li>
<li><strong>transform</strong> : apply transformation to dataset</li>
</ul>
<p>these 2 methods can be replaced by <strong>fit_transform</strong>() directly</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Instantiation d&#39;un modèle de régression linéaire</span>
<span class="n">polyreg</span> <span class="o">=</span> <span class="n">LinearRegression</span><span class="p">()</span>

<span class="c1"># Entraînement du modèle sur les features polynomiaux</span>
<span class="n">polyreg</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_poly</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>

<span class="c1"># Evaluation du modèle sur les données d&#39;entraînement</span>
<span class="n">y_pred_train</span> <span class="o">=</span> <span class="n">polyreg</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_train_poly</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MAE Train:&quot;</span><span class="p">,</span> <span class="n">mean_absolute_error</span><span class="p">(</span><span class="n">y_train</span><span class="p">,</span> <span class="n">y_pred_train</span><span class="p">),</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># Evaluation du modèle sur les données de test</span>
<span class="n">y_pred_test</span> <span class="o">=</span> <span class="n">polyreg</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_poly</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MAE Test:&quot;</span><span class="p">,</span> <span class="n">mean_absolute_error</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_test</span><span class="p">),</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Nous sommes absolument dans un régime de surapprentissage.&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Le modèle de régression polynomiale est performant sur les données d&#39;entrainement mais pas sur les données de test.&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Le modèle de régression polynomiale d&#39;ordre 3 est beaucoup moins performant que la régression linéaire simple.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<hr />
<h1 id="machine-learning-classification">MACHINE LEARNING : Classification</h1>
<p><strong>Regression :</strong> continuous values (numerical)</p>
<p><strong>Classification</strong> : discrete values (numerical or litteral)</p>
<p>ex:</p>
<p><img alt="Untitled" src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5815c037-ed75-4cf0-be92-307dc9366b70/Untitled.png" /></p>
<p>Scikit-learn propose de nombreux modèles de classification que l'on peut regrouper en deux familles :</p>
<ul>
<li>Les modèles linéaires comme <code>**LogisticRegression**</code>.</li>
<li>Les modèles <strong>non-linéaires</strong> comme <strong><code>KNeighborsClassifier</code></strong>.</li>
</ul>
<p>L'utilisation de ces modèles se fait de la même façon pour <strong>tous</strong> les modèles de scikit-learn :</p>
<ul>
<li><strong>Instanciation</strong> du modèle.</li>
<li><strong>Entraînement</strong> du modèle : <strong><code>model.fit(X_train, y_train)</code></strong>.</li>
<li><strong>Prédiction</strong> : <strong><code>model.predict(X_test)</code></strong>.</li>
</ul>
<p>La prédiction sur le jeu de test nous permet d'<strong>évaluer</strong> la performance du modèle grâce à des <strong>métriques</strong> adaptées.</p>
<p>Les métriques que nous avons vues s'utilisent pour la classification <strong>binaire</strong> et se calculent grâce à 4 valeurs :</p>
<ul>
<li>Vrais Positifs : Prédiction = <strong>+</strong> | Réalité = <strong>+</strong></li>
<li>Vrais Négatifs : Prédiction = <strong>-</strong> | Réalité = <strong>-</strong></li>
<li>Faux Positifs : Prédiction = <strong>+</strong> | Réalité = <strong>-</strong></li>
<li>Faux Négatifs : Prédiction = <strong>-</strong>  | Réalité = <strong>+</strong></li>
</ul>
<p>Toutes ces valeurs peuvent se calculer à l'aide de la <strong>matrice de confusion</strong> générée par la fonction <strong><code>confusion_matrix</code></strong> du sous-module <code>**sklearn.metrics**</code> ou par la fonction <strong><code>pd.crosstab</code></strong>.</p>
<p>Grâce à ces valeurs, nous pouvons calculer des <strong>métriques</strong> comme :</p>
<ul>
<li><strong>L'accuracy</strong> : La proportion d'observations correctement classifiées.</li>
<li>La <strong>précision</strong> : La proportion de vrais positifs parmi toutes les prédictions positives du modèle.</li>
<li>Le <strong>rappel</strong> : La proportion d'observations réellement positives qui ont été correctement classifiées positives par le modèle.</li>
</ul>
<p>Toutes ces métriques peuvent s'obtenir à l'aide de la fonction  <strong><code>classification_report</code></strong> du sous-module <strong><code>sklearn.metrics</code></strong>.</p>
<p>Le <strong><code>F1-Score</code></strong> quantifie l'<strong>équilibre</strong> entre ces métriques, ce qui nous donne un critère <strong>fiable</strong> pour <strong>choisir</strong> le modèle le plus adapté à notre problème.</p>
<h2 id="linear-classification-k-nearest-neighbors">Linear Classification <strong><em>*: K-Nearest Neighbors</em></strong>*</h2>
<p>for <strong>K=5</strong>, if <strong>5 neighbors</strong> are democrats, the observations <strong>will be classified</strong> as democrats</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">sklearn.neighbors</span> <span class="kn">import</span> <span class="n">KNeighborsClassifier</span>

<span class="c1"># Instanciation du modèle</span>
<span class="n">knn</span> <span class="o">=</span> <span class="n">KNeighborsClassifier</span><span class="p">(</span><span class="n">n_neighbors</span> <span class="o">=</span> <span class="mi">6</span><span class="p">)</span>
<span class="c1"># Entraînement du modèle sur le jeu d&#39;entraînement</span>
<span class="n">knn</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="c1"># Prédiction sur les données de test</span>
<span class="n">y_pred_test_knn</span> <span class="o">=</span> <span class="n">knn</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="c1"># Affichage des 10 premières prédictions</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y_pred_test_knn</span><span class="p">[:</span><span class="mi">10</span><span class="p">])</span>

<span class="c1"># Results ############################################################</span>
<span class="c1"># array([&#39;democrat&#39;, &#39;democrat&#39;, &#39;democrat&#39;, &#39;democrat&#39;, &#39;democrat&#39;,</span>
<span class="c1">#       &#39;democrat&#39;, &#39;democrat&#39;, &#39;democrat&#39;, &#39;republican&#39;, &#39;democrat&#39;],</span>
<span class="c1">#       dtype=object)</span>
</code></pre></div></td></tr></table></div>
<h2 id="linear-classification-logistic-regression">Linear Classification <strong><em>*: Logistic Regression</em></strong>*</h2>
<p>Probability that y = 0 or 1</p>
<p><img alt="Untitled" src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/682c92ba-5f61-4e4f-8328-ff58cda6b287/Untitled.png" /></p>
<p>f is called the <strong><code>sigmoïd function</code></strong> or <strong><code>logistic function</code></strong> </p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LogisticRegression</span>

<span class="c1"># Instanciation du modèle</span>
<span class="n">logreg</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">()</span>
<span class="c1"># Entraînement du modèle sur le jeu d&#39;entraînement</span>
<span class="n">logreg</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="c1"># Prédiction sur les données de test</span>
<span class="n">y_pred_test_logreg</span> <span class="o">=</span> <span class="n">logreg</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="c1"># Affichage des 10 premières prédictions</span>
<span class="nb">print</span><span class="p">(</span><span class="n">y_pred_test_logreg</span><span class="p">[:</span><span class="mi">10</span><span class="p">])</span>

<span class="c1"># Results ###########################################################</span>
<span class="c1"># array([&#39;democrat&#39;, &#39;republican&#39;, &#39;democrat&#39;, &#39;democrat&#39;, &#39;democrat&#39;,</span>
<span class="c1">#       &#39;democrat&#39;, &#39;democrat&#39;, &#39;democrat&#39;, &#39;republican&#39;, &#39;democrat&#39;],</span>
<span class="c1">#       dtype=object)</span>
</code></pre></div></td></tr></table></div>
<h2 id="evaluate-classification-model-performance">Evaluate classification model performance</h2>
<blockquote>
<p><strong>n</strong> : number of observations</p>
<p><strong>VP</strong> : vrai positif, <strong>FP</strong> : faux positif, <strong>VN</strong> : vrai négatif, <strong>FN</strong> : faux négatif</p>
</blockquote>
<p><img alt="Untitled" src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/509c81a8-e3bd-4b7e-a656-b750081558af/Untitled.png" /></p>
<p>Different <strong>metrics</strong>:</p>
<ul>
<li>
<p><strong><code>accuracy</code> : [accuracy_score(y_test, y_pred)]</strong></p>
<p><em>true prediction ratio (most used)</em> </p>
<p>good indicator when VP and VN is well balanced</p>
</li>
</ul>
<p>$$
\mathrm{accuracy} = \frac{\mathrm{VP} + \mathrm{VN}}{n}
$$</p>
<ul>
<li>
<p><strong><code>precision</code> : [precision_score(y_test, y_pred, pos_label)]</strong></p>
<p><em>true prediction among positive prediction</em></p>
<p>good indicator when dominant class</p>
</li>
</ul>
<p>$$
\mathrm{precision} = \frac{\mathrm{VP}}{\mathrm{VP} + \mathrm{FP}}
$$</p>
<ul>
<li>
<p><strong><code>recall</code> : [recall_score(y_test, y_pred, pos_label)]</strong></p>
<p><em>number of true positive classification among all positive</em></p>
<p>good indicator when dominant class</p>
</li>
</ul>
<p>$$
\mathrm{recall} = \frac{\mathrm{VP}}{\mathrm{VP} + \mathrm{FN}}
$$</p>
<ul>
<li>
<p><strong><code>confusion matrix</code> :</strong> calculate all 3 metrics.</p>
<p><strong>confusion_matrix</strong>(y_true, y_pred)</p>
<p><strong>pd.crosstab</strong>(y_test, y_pred_test_knn, rownames=['Realité'], colnames=['Prédiction'])</p>
</li>
</ul>
<p>$$
\mathrm{Confusion Matrix} = \begin{bmatrix}
                                    \mathrm{VN} &amp; \mathrm{FP} \
                                    \mathrm{FN} &amp; \mathrm{VP}
                                \end{bmatrix}
$$</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">confusion_matrix</span>

<span class="c1"># Calcul et affichage de la matrice de confusion</span>
<span class="n">matrice_confusion</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_test_knn</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Matrice de Confusion:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>  <span class="n">matrice_confusion</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Le modèle knn a fait&quot;</span><span class="p">,</span> <span class="n">matrice_confusion</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;Faux Positifs.&quot;</span><span class="p">)</span>

<span class="c1"># Calcul de l&#39;accuracy, precision et rappel</span>
<span class="p">(</span><span class="n">VN</span><span class="p">,</span> <span class="n">FP</span><span class="p">),</span> <span class="p">(</span><span class="n">FN</span><span class="p">,</span> <span class="n">VP</span><span class="p">)</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_test_knn</span><span class="p">)</span>
<span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">y_test</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">KNN Accuracy:&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">VP</span> <span class="o">+</span> <span class="n">VN</span><span class="p">)</span> <span class="o">/</span> <span class="n">n</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">KNN Précision:&quot;</span><span class="p">,</span> <span class="n">VP</span> <span class="o">/</span> <span class="p">(</span><span class="n">VP</span> <span class="o">+</span> <span class="n">FP</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">KNN Rappel:&quot;</span><span class="p">,</span> <span class="n">VP</span> <span class="o">/</span> <span class="p">(</span><span class="n">VP</span> <span class="o">+</span> <span class="n">FN</span><span class="p">))</span>

<span class="c1"># Results ##########################################################</span>
<span class="c1"># Matrice de Confusion:</span>
<span class="c1"># [[48  5]</span>
<span class="c1"># [ 2 32]]</span>

<span class="c1"># Le modèle knn a fait 5 Faux Positifs.</span>
<span class="c1"># KNN Accuracy: 0.9195402298850575</span>
<span class="c1"># KNN Précision: 0.8648648648648649</span>
<span class="c1"># KNN Rappel: 0.9411764705882353</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">accuracy_score</span><span class="p">,</span> <span class="n">precision_score</span><span class="p">,</span> <span class="n">recall_score</span>

<span class="c1"># Calcul et affichage de la matrice de confusion</span>
<span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_test_logreg</span><span class="p">,</span> <span class="n">rownames</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Realité&#39;</span><span class="p">],</span> <span class="n">colnames</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Prédiction&#39;</span><span class="p">])</span>

<span class="c1"># Calcul de l&#39;accuracy, precision et rappel</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">LogReg Accuracy:&quot;</span><span class="p">,</span> <span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_test_logreg</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">LogReg Précision:&quot;</span><span class="p">,</span> <span class="n">precision_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_test_logreg</span><span class="p">,</span> <span class="n">pos_label</span> <span class="o">=</span> <span class="s1">&#39;republican&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">LogReg Rappel:&quot;</span><span class="p">,</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_test_logreg</span><span class="p">,</span> <span class="n">pos_label</span> <span class="o">=</span> <span class="s1">&#39;republican&#39;</span><span class="p">))</span>

<span class="c1"># Results ###########################################################</span>
<span class="c1"># LogReg Accuracy: 0.9310344827586207</span>
<span class="c1"># LogReg Précision: 0.8888888888888888</span>
<span class="c1"># LogReg Rappel: 0.9411764705882353</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">classification_report</span>

<span class="nb">print</span><span class="p">(</span><span class="n">classification_report</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_test_logreg</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">classification_report</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_test_knn</span><span class="p">))</span>

<span class="c1"># Results ###########################################################</span>
<span class="c1">#               precision    recall  f1-score   support</span>

<span class="c1">#    democrat       0.96      0.92      0.94        53</span>
<span class="c1">#  republican       0.89      0.94      0.91        34</span>

<span class="c1">#    accuracy                           0.93        87</span>
<span class="c1">#   macro avg       0.92      0.93      0.93        87</span>
<span class="c1">#weighted avg       0.93      0.93      0.93        87</span>

<span class="c1">#              precision    recall  f1-score   support</span>

<span class="c1">#    democrat       0.96      0.91      0.93        53</span>
<span class="c1">#  republican       0.86      0.94      0.90        34</span>

<span class="c1">#    accuracy                           0.92        87</span>
<span class="c1">#   macro avg       0.91      0.92      0.92        87</span>
<span class="c1">#weighted avg       0.92      0.92      0.92        87</span>
</code></pre></div></td></tr></table></div>
<p><strong><code>F1-Score</code> :</strong> for classification problem adequate. Kind of a <strong>mean</strong> of <strong>precision</strong> and <strong>recall</strong></p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">f1_score</span>

<span class="nb">print</span><span class="p">(</span><span class="n">f1_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_test_knn</span><span class="p">,</span> <span class="n">pos_label</span> <span class="o">=</span> <span class="s1">&#39;republican&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">f1_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_pred_test_logreg</span><span class="p">,</span> <span class="n">pos_label</span> <span class="o">=</span> <span class="s1">&#39;republican&#39;</span><span class="p">))</span>

<span class="c1"># Results ###########################################################</span>
<span class="c1"># F1 KNN: 0.9014084507042254</span>
<span class="c1"># F1 LogReg: 0.9142857142857143</span>
</code></pre></div></td></tr></table></div>
<hr />
<h1 id="sql-alchemy">SQL ALCHEMY</h1>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s1">&#39;sqlite:///chinook.db&#39;</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">inspector</span> <span class="o">=</span> <span class="n">inspect</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>
<span class="n">inspector</span><span class="o">.</span><span class="n">get_table_names</span><span class="p">()</span>
<span class="n">inspector</span><span class="o">.</span><span class="n">get_columns</span><span class="p">(</span><span class="n">table_name</span><span class="o">=</span><span class="s1">&#39;col&#39;</span><span class="p">)</span>
<span class="n">inspector</span><span class="o">.</span><span class="n">get_foreign_keys</span><span class="p">(</span><span class="n">table_name</span><span class="o">=</span><span class="s1">&#39;table&#39;</span><span class="p">)</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>

<span class="c1"># request</span>
<span class="n">stmt</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s2">&quot;SELECT Title FROM albums LIMIT 10;&quot;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">stmt</span><span class="p">)</span>
<span class="n">result</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span> 

<span class="c1"># create a table</span>
<span class="n">user</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span><span class="n">metadata_obj</span><span class="p">,</span>
             <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;user_id&#39;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
             <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;user_name&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">16</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
             <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;email_address&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">60</span><span class="p">)),</span>
             <span class="n">Column</span><span class="p">(</span><span class="s1">&#39;nickname&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
             <span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;parent.id&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="c1"># </span>
<span class="n">metadata_obj</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>

<span class="c1"># delete table</span>
<span class="n">drop</span> <span class="o">=</span> <span class="n">text</span><span class="p">(</span><span class="s1">&#39;DROP TABLE IF EXISTS name_table;&#39;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">engine2</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">drop</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h1 id="pyspark">PySpark</h1>
<p><strong>Imports</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Import PySpark related modules</span>
<span class="kn">import</span> <span class="nn">pyspark</span>
<span class="kn">from</span> <span class="nn">pyspark.rdd</span> <span class="kn">import</span> <span class="n">RDD</span>
<span class="kn">from</span> <span class="nn">pyspark.sql</span> <span class="kn">import</span> <span class="n">Row</span>
<span class="kn">from</span> <span class="nn">pyspark.sql</span> <span class="kn">import</span> <span class="n">DataFrame</span>
<span class="kn">from</span> <span class="nn">pyspark.sql</span> <span class="kn">import</span> <span class="n">SparkSession</span>
<span class="kn">from</span> <span class="nn">pyspark.sql</span> <span class="kn">import</span> <span class="n">SQLContext</span>
<span class="kn">from</span> <span class="nn">pyspark.sql</span> <span class="kn">import</span> <span class="n">functions</span>
<span class="kn">from</span> <span class="nn">pyspark.sql.functions</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">lit</span><span class="p">,</span> 
    <span class="n">desc</span><span class="p">,</span> 
    <span class="n">col</span><span class="p">,</span> 
    <span class="n">size</span><span class="p">,</span> 
    <span class="n">array_contains</span><span class="p">,</span>
    <span class="n">isnan</span><span class="p">,</span> 
    <span class="n">udf</span><span class="p">,</span> 
    <span class="n">hour</span><span class="p">,</span> 
    <span class="n">array_min</span><span class="p">,</span> 
    <span class="n">array_max</span><span class="p">,</span> 
    <span class="n">countDistinct</span>
<span class="kn">from</span> <span class="nn">pyspark.sql.types</span> <span class="kn">import</span> <span class="o">*</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>conf</strong>
https://spark.apache.org/docs/latest/configuration.html
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># Initialize a spark session.</span>
<span class="n">MAX_MEMORY</span> <span class="o">=</span> <span class="s1">&#39;15G&#39;</span>
<span class="n">conf</span> <span class="o">=</span> <span class="n">pyspark</span><span class="o">.</span><span class="n">SparkConf</span><span class="p">()</span><span class="o">.</span><span class="n">setMaster</span><span class="p">(</span><span class="s2">&quot;local[*]&quot;</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;spark.executor.heartbeatInterval&#39;</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;spark.network.timeout&#39;</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;spark.core.connection.ack.wait.timeout&quot;</span><span class="p">,</span> <span class="s2">&quot;3600&quot;</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;spark.executor.memory&quot;</span><span class="p">,</span> <span class="n">MAX_MEMORY</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;spark.driver.memory&quot;</span><span class="p">,</span> <span class="n">MAX_MEMORY</span><span class="p">)</span>

<span class="n">spark</span> <span class="o">=</span> <span class="n">SparkSession</span> \
    <span class="o">.</span><span class="n">builder</span> \
    <span class="o">.</span><span class="n">appName</span><span class="p">(</span><span class="s2">&quot;Pyspark guide&quot;</span><span class="p">)</span> \
    <span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">conf</span><span class="o">=</span><span class="n">conf</span><span class="p">)</span> \
    <span class="o">.</span><span class="n">getOrCreate</span><span class="p">()</span>

<span class="c1"># Load the main data set into pyspark data frame </span>
<span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">json</span><span class="p">(</span><span class="s1">&#39;file.json&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;DROPMALFORMED&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div></p>
<p><strong>overview</strong>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">([</span><span class="s1">&#39;col1&#39;</span><span class="p">,</span><span class="s1">&#39;col2&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">toPandas</span><span class="p">()</span>             <span class="c1"># if no col is given then describe all columns</span>
<span class="n">df</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">toPandas</span><span class="p">()</span>
<span class="n">df</span><span class="o">.</span><span class="n">printSchema</span><span class="p">()</span>                                    <span class="c1"># print the schema of df</span>
<span class="n">df</span><span class="o">.</span><span class="n">schema</span>                                           <span class="c1"># Returns the schema of this DataFrame as a pyspark.sql.types.StructType</span>

<span class="n">df</span><span class="o">.</span><span class="n">collect</span><span class="p">()[:</span><span class="n">k</span><span class="p">]</span>                                    <span class="c1"># Lazy evaluation </span>
<span class="n">df</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>                                          <span class="c1"># Returns the first row as a Row.</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>                                          <span class="c1"># Returns the first n rows as Rows.</span>
<span class="n">df</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>                                          <span class="c1"># Returns the first n rows as Rows.</span>
<span class="n">df</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>                                          <span class="c1"># Returns the first n rows as list of Rows.</span>
<span class="n">df</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>                                          <span class="c1"># Count the number of rows in df</span>
<span class="n">df</span><span class="o">.</span><span class="n">distinct</span><span class="p">()</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>                               <span class="c1"># Count the number of distinct rows in df</span>
</code></pre></div></td></tr></table></div></p>
<h1 id="generator">Generator</h1>
<p><strong>use cases</strong>
- when dealing with a huge dataset
- scenarios where we do NOT need to reiterate it more than once (can only be iterated once)
- lazy evaluation
- They are a great way to generate <strong>infinite</strong> sequences in a memory-efficient manner</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 Philippe Vaudin
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.path", "navigation.top", "navigation.tracking", "navigation.footer", "toc.follow", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
    
  </body>
</html>